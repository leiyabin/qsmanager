!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("undefined"!=typeof jQuery?jQuery:window.Zepto)}(function(e){"use strict";function t(t){var r=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(t.target).ajaxSubmit(r))}function r(t){var r=t.target,a=e(r);if(!a.is("[type=submit],[type=image]")){var n=a.closest("[type=submit]");if(0===n.length)return;r=n[0]}var i=this;if(i.clk=r,"image"==r.type)if(void 0!==t.offsetX)i.clk_x=t.offsetX,i.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var o=a.offset();i.clk_x=t.pageX-o.left,i.clk_y=t.pageY-o.top}else i.clk_x=t.pageX-r.offsetLeft,i.clk_y=t.pageY-r.offsetTop;setTimeout(function(){i.clk=i.clk_x=i.clk_y=null},100)}function a(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}var n={};n.fileapi=void 0!==e("<input type='file'/>").get(0).files,n.formdata=void 0!==window.FormData;var i=!!e.fn.prop;e.fn.attr2=function(){if(!i)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(t){function r(r){var a,n,i=e.param(r,t.traditional).split("&"),o=i.length,s=[];for(a=0;o>a;a++)i[a]=i[a].replace(/\+/g," "),n=i[a].split("="),s.push([decodeURIComponent(n[0]),decodeURIComponent(n[1])]);return s}function o(a){for(var n=new FormData,i=0;i<a.length;i++)n.append(a[i].name,a[i].value);if(t.extraData){var o=r(t.extraData);for(i=0;i<o.length;i++)o[i]&&n.append(o[i][0],o[i][1])}t.data=null;var s=e.extend(!0,{},e.ajaxSettings,t,{contentType:!1,processData:!1,cache:!1,type:u||"POST"});t.uploadProgress&&(s.xhr=function(){var r=e.ajaxSettings.xhr();return r.upload&&r.upload.addEventListener("progress",function(e){var r=0,a=e.loaded||e.position,n=e.total;e.lengthComputable&&(r=Math.ceil(a/n*100)),t.uploadProgress(e,a,n,r)},!1),r}),s.data=null;var c=s.beforeSend;return s.beforeSend=function(e,r){t.formData?r.data=t.formData:r.data=n,c&&c.call(this,e,r)},e.ajax(s)}function s(r){function n(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(r){a("cannot get iframe.contentWindow document: "+r)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(r){a("cannot get iframe.contentDocument: "+r),t=e.document}return t}function o(){function t(){try{var e=n(g).readyState;a("state = "+e),e&&"uninitialized"==e.toLowerCase()&&setTimeout(t,50)}catch(r){a("Server abort: ",r," (",r.name,")"),s(k),j&&clearTimeout(j),j=void 0}}var r=f.attr2("target"),i=f.attr2("action");w.setAttribute("target",p),u&&!/post/i.test(u)||w.setAttribute("method","POST"),i!=d.url&&w.setAttribute("action",d.url),d.skipEncodingOverride||u&&!/post/i.test(u)||f.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),d.timeout&&(j=setTimeout(function(){T=!0,s(D)},d.timeout));var o=[];try{if(d.extraData)for(var c in d.extraData)d.extraData.hasOwnProperty(c)&&(e.isPlainObject(d.extraData[c])&&d.extraData[c].hasOwnProperty("name")&&d.extraData[c].hasOwnProperty("value")?o.push(e('<input type="hidden" name="'+d.extraData[c].name+'">').val(d.extraData[c].value).appendTo(w)[0]):o.push(e('<input type="hidden" name="'+c+'">').val(d.extraData[c]).appendTo(w)[0]));d.iframeTarget||v.appendTo("body"),g.attachEvent?g.attachEvent("onload",s):g.addEventListener("load",s,!1),setTimeout(t,15);try{w.submit()}catch(l){var m=document.createElement("form").submit;m.apply(w)}}finally{w.setAttribute("action",i),r?w.setAttribute("target",r):f.removeAttr("target"),e(o).remove()}}function s(t){if(!x.aborted&&!F){if(M=n(g),M||(a("cannot access response document"),t=k),t===D&&x)return x.abort("timeout"),void S.reject(x,"timeout");if(t==k&&x)return x.abort("server abort"),void S.reject(x,"error","server abort");if(M&&M.location.href!=d.iframeSrc||T){g.detachEvent?g.detachEvent("onload",s):g.removeEventListener("load",s,!1);var r,i="success";try{if(T)throw"timeout";var o="xml"==d.dataType||M.XMLDocument||e.isXMLDoc(M);if(a("isXml="+o),!o&&window.opera&&(null===M.body||!M.body.innerHTML)&&--O)return a("requeing onLoad callback, DOM not available"),void setTimeout(s,250);var u=M.body?M.body:M.documentElement;x.responseText=u?u.innerHTML:null,x.responseXML=M.XMLDocument?M.XMLDocument:M,o&&(d.dataType="xml"),x.getResponseHeader=function(e){var t={"content-type":d.dataType};return t[e.toLowerCase()]},u&&(x.status=Number(u.getAttribute("status"))||x.status,x.statusText=u.getAttribute("statusText")||x.statusText);var c=(d.dataType||"").toLowerCase(),l=/(json|script|text)/.test(c);if(l||d.textarea){var f=M.getElementsByTagName("textarea")[0];if(f)x.responseText=f.value,x.status=Number(f.getAttribute("status"))||x.status,x.statusText=f.getAttribute("statusText")||x.statusText;else if(l){var p=M.getElementsByTagName("pre")[0],h=M.getElementsByTagName("body")[0];p?x.responseText=p.textContent?p.textContent:p.innerText:h&&(x.responseText=h.textContent?h.textContent:h.innerText)}}else"xml"==c&&!x.responseXML&&x.responseText&&(x.responseXML=X(x.responseText));try{E=_(x,c,d)}catch(y){i="parsererror",x.error=r=y||i}}catch(y){a("error caught: ",y),i="error",x.error=r=y||i}x.aborted&&(a("upload aborted"),i=null),x.status&&(i=x.status>=200&&x.status<300||304===x.status?"success":"error"),"success"===i?(d.success&&d.success.call(d.context,E,"success",x),S.resolve(x.responseText,"success",x),m&&e.event.trigger("ajaxSuccess",[x,d])):i&&(void 0===r&&(r=x.statusText),d.error&&d.error.call(d.context,x,i,r),S.reject(x,"error",r),m&&e.event.trigger("ajaxError",[x,d,r])),m&&e.event.trigger("ajaxComplete",[x,d]),m&&!--e.active&&e.event.trigger("ajaxStop"),d.complete&&d.complete.call(d.context,x,i),F=!0,d.timeout&&clearTimeout(j),setTimeout(function(){d.iframeTarget?v.attr("src",d.iframeSrc):v.remove(),x.responseXML=null},100)}}}var c,l,d,m,p,v,g,x,y,b,T,j,w=f[0],S=e.Deferred();if(S.abort=function(e){x.abort(e)},r)for(l=0;l<h.length;l++)c=e(h[l]),i?c.prop("disabled",!1):c.removeAttr("disabled");if(d=e.extend(!0,{},e.ajaxSettings,t),d.context=d.context||d,p="jqFormIO"+(new Date).getTime(),d.iframeTarget?(v=e(d.iframeTarget),b=v.attr2("name"),b?p=b:v.attr2("name",p)):(v=e('<iframe name="'+p+'" src="'+d.iframeSrc+'" />'),v.css({position:"absolute",top:"-1000px",left:"-1000px"})),g=v[0],x={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var r="timeout"===t?"timeout":"aborted";a("aborting upload... "+r),this.aborted=1;try{g.contentWindow.document.execCommand&&g.contentWindow.document.execCommand("Stop")}catch(n){}v.attr("src",d.iframeSrc),x.error=r,d.error&&d.error.call(d.context,x,r,t),m&&e.event.trigger("ajaxError",[x,d,r]),d.complete&&d.complete.call(d.context,x,r)}},m=d.global,m&&0===e.active++&&e.event.trigger("ajaxStart"),m&&e.event.trigger("ajaxSend",[x,d]),d.beforeSend&&d.beforeSend.call(d.context,x,d)===!1)return d.global&&e.active--,S.reject(),S;if(x.aborted)return S.reject(),S;y=w.clk,y&&(b=y.name,b&&!y.disabled&&(d.extraData=d.extraData||{},d.extraData[b]=y.value,"image"==y.type&&(d.extraData[b+".x"]=w.clk_x,d.extraData[b+".y"]=w.clk_y)));var D=1,k=2,A=e("meta[name=csrf-token]").attr("content"),L=e("meta[name=csrf-param]").attr("content");L&&A&&(d.extraData=d.extraData||{},d.extraData[L]=A),d.forceSync?o():setTimeout(o,10);var E,M,F,O=50,X=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},C=e.parseJSON||function(e){return window.eval("("+e+")")},_=function(t,r,a){var n=t.getResponseHeader("content-type")||"",i="xml"===r||!r&&n.indexOf("xml")>=0,o=i?t.responseXML:t.responseText;return i&&"parsererror"===o.documentElement.nodeName&&e.error&&e.error("parsererror"),a&&a.dataFilter&&(o=a.dataFilter(o,r)),"string"==typeof o&&("json"===r||!r&&n.indexOf("json")>=0?o=C(o):("script"===r||!r&&n.indexOf("javascript")>=0)&&e.globalEval(o)),o};return S}if(!this.length)return a("ajaxSubmit: skipping submit process - no element selected"),this;var u,c,l,f=this;"function"==typeof t?t={success:t}:void 0===t&&(t={}),u=t.type||this.attr2("method"),c=t.url||this.attr2("action"),l="string"==typeof c?e.trim(c):"",l=l||window.location.href||"",l&&(l=(l.match(/^([^#]+)/)||[])[1]),t=e.extend(!0,{url:l,success:e.ajaxSettings.success,type:u||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},t);var d={};if(this.trigger("form-pre-serialize",[this,t,d]),d.veto)return a("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(t.beforeSerialize&&t.beforeSerialize(this,t)===!1)return a("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var m=t.traditional;void 0===m&&(m=e.ajaxSettings.traditional);var p,h=[],v=this.formToArray(t.semantic,h);if(t.data&&(t.extraData=t.data,p=e.param(t.data,m)),t.beforeSubmit&&t.beforeSubmit(v,this,t)===!1)return a("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[v,this,t,d]),d.veto)return a("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var g=e.param(v,m);p&&(g=g?g+"&"+p:p),"GET"==t.type.toUpperCase()?(t.url+=(t.url.indexOf("?")>=0?"&":"?")+g,t.data=null):t.data=g;var x=[];if(t.resetForm&&x.push(function(){f.resetForm()}),t.clearForm&&x.push(function(){f.clearForm(t.includeHidden)}),!t.dataType&&t.target){var y=t.success||function(){};x.push(function(r){var a=t.replaceTarget?"replaceWith":"html";e(t.target)[a](r).each(y,arguments)})}else t.success&&x.push(t.success);if(t.success=function(e,r,a){for(var n=t.context||this,i=0,o=x.length;o>i;i++)x[i].apply(n,[e,r,a||f,f])},t.error){var b=t.error;t.error=function(e,r,a){var n=t.context||this;b.apply(n,[e,r,a,f])}}if(t.complete){var T=t.complete;t.complete=function(e,r){var a=t.context||this;T.apply(a,[e,r,f])}}var j=e("input[type=file]:enabled",this).filter(function(){return""!==e(this).val()}),w=j.length>0,S="multipart/form-data",D=f.attr("enctype")==S||f.attr("encoding")==S,k=n.fileapi&&n.formdata;a("fileAPI :"+k);var A,L=(w||D)&&!k;t.iframe!==!1&&(t.iframe||L)?t.closeKeepAlive?e.get(t.closeKeepAlive,function(){A=s(v)}):A=s(v):A=(w||D)&&k?o(v):e.ajax(t),f.removeData("jqxhr").data("jqxhr",A);for(var E=0;E<h.length;E++)h[E]=null;return this.trigger("form-submit-notify",[this,t]),this},e.fn.ajaxForm=function(n){if(n=n||{},n.delegation=n.delegation&&e.isFunction(e.fn.on),!n.delegation&&0===this.length){var i={s:this.selector,c:this.context};return!e.isReady&&i.s?(a("DOM not ready, queuing ajaxForm"),e(function(){e(i.s,i.c).ajaxForm(n)}),this):(a("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return n.delegation?(e(document).off("submit.form-plugin",this.selector,t).off("click.form-plugin",this.selector,r).on("submit.form-plugin",this.selector,n,t).on("click.form-plugin",this.selector,n,r),this):this.ajaxFormUnbind().bind("submit.form-plugin",n,t).bind("click.form-plugin",n,r)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t,r){var a=[];if(0===this.length)return a;var i=this[0],o=t?i.getElementsByTagName("*"):i.elements;if(!o)return a;var s,u,c,l,f,d,m;for(s=0,d=o.length;d>s;s++)if(f=o[s],c=f.name,c&&!f.disabled)if(t&&i.clk&&"image"==f.type)i.clk==f&&(a.push({name:c,value:e(f).val(),type:f.type}),a.push({name:c+".x",value:i.clk_x},{name:c+".y",value:i.clk_y}));else if(l=e.fieldValue(f,!0),l&&l.constructor==Array)for(r&&r.push(f),u=0,m=l.length;m>u;u++)a.push({name:c,value:l[u]});else if(n.fileapi&&"file"==f.type){r&&r.push(f);var p=f.files;if(p.length)for(u=0;u<p.length;u++)a.push({name:c,value:p[u],type:f.type});else a.push({name:c,value:"",type:f.type})}else null!==l&&"undefined"!=typeof l&&(r&&r.push(f),a.push({name:c,value:l,type:f.type,required:f.required}));if(!t&&i.clk){var h=e(i.clk),v=h[0];c=v.name,c&&!v.disabled&&"image"==v.type&&(a.push({name:c,value:h.val()}),a.push({name:c+".x",value:i.clk_x},{name:c+".y",value:i.clk_y}))}return a},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var r=[];return this.each(function(){var a=this.name;if(a){var n=e.fieldValue(this,t);if(n&&n.constructor==Array)for(var i=0,o=n.length;o>i;i++)r.push({name:a,value:n[i]});else null!==n&&"undefined"!=typeof n&&r.push({name:this.name,value:n})}}),e.param(r)},e.fn.fieldValue=function(t){for(var r=[],a=0,n=this.length;n>a;a++){var i=this[a],o=e.fieldValue(i,t);null===o||"undefined"==typeof o||o.constructor==Array&&!o.length||(o.constructor==Array?e.merge(r,o):r.push(o))}return r},e.fieldValue=function(t,r){var a=t.name,n=t.type,i=t.tagName.toLowerCase();if(void 0===r&&(r=!0),r&&(!a||t.disabled||"reset"==n||"button"==n||("checkbox"==n||"radio"==n)&&!t.checked||("submit"==n||"image"==n)&&t.form&&t.form.clk!=t||"select"==i&&-1==t.selectedIndex))return null;if("select"==i){var o=t.selectedIndex;if(0>o)return null;for(var s=[],u=t.options,c="select-one"==n,l=c?o+1:u.length,f=c?o:0;l>f;f++){var d=u[f];if(d.selected){var m=d.value;if(m||(m=d.attributes&&d.attributes.value&&!d.attributes.value.specified?d.text:d.value),c)return m;s.push(m)}}return s}return e(t).val()},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(t){var r=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var a=this.type,n=this.tagName.toLowerCase();r.test(a)||"textarea"==n?this.value="":"checkbox"==a||"radio"==a?this.checked=!1:"select"==n?this.selectedIndex=-1:"file"==a?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(t===!0&&/hidden/.test(a)||"string"==typeof t&&e(this).is(t))&&(this.value="")})},e.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var r=this.type;if("checkbox"==r||"radio"==r)this.checked=t;else if("option"==this.tagName.toLowerCase()){var a=e(this).parent("select");t&&a[0]&&"select-one"==a[0].type&&a.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5mb3JtLm1pbi5qcyJdLCJuYW1lcyI6WyJmYWN0b3J5IiwiZGVmaW5lIiwiYW1kIiwialF1ZXJ5Iiwid2luZG93IiwiWmVwdG8iLCIkIiwiZG9BamF4U3VibWl0IiwiZSIsIm9wdGlvbnMiLCJkYXRhIiwiaXNEZWZhdWx0UHJldmVudGVkIiwicHJldmVudERlZmF1bHQiLCJ0YXJnZXQiLCJhamF4U3VibWl0IiwiY2FwdHVyZVN1Ym1pdHRpbmdFbGVtZW50IiwiJGVsIiwiaXMiLCJ0IiwiY2xvc2VzdCIsImxlbmd0aCIsImZvcm0iLCJ0aGlzIiwiY2xrIiwidHlwZSIsInVuZGVmaW5lZCIsIm9mZnNldFgiLCJjbGtfeCIsImNsa195Iiwib2Zmc2V0WSIsImZuIiwib2Zmc2V0IiwicGFnZVgiLCJsZWZ0IiwicGFnZVkiLCJ0b3AiLCJvZmZzZXRMZWZ0Iiwib2Zmc2V0VG9wIiwic2V0VGltZW91dCIsImxvZyIsImRlYnVnIiwibXNnIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJqb2luIiwiY2FsbCIsImFyZ3VtZW50cyIsImNvbnNvbGUiLCJvcGVyYSIsInBvc3RFcnJvciIsImZlYXR1cmUiLCJmaWxlYXBpIiwiZ2V0IiwiZmlsZXMiLCJmb3JtZGF0YSIsIkZvcm1EYXRhIiwiaGFzUHJvcCIsInByb3AiLCJhdHRyMiIsImF0dHIiLCJhcHBseSIsInZhbCIsImpxdWVyeSIsImRlZXBTZXJpYWxpemUiLCJleHRyYURhdGEiLCJpIiwicGFydCIsInNlcmlhbGl6ZWQiLCJwYXJhbSIsInRyYWRpdGlvbmFsIiwic3BsaXQiLCJsZW4iLCJyZXN1bHQiLCJyZXBsYWNlIiwicHVzaCIsImRlY29kZVVSSUNvbXBvbmVudCIsImZpbGVVcGxvYWRYaHIiLCJhIiwiYXBwZW5kIiwibmFtZSIsInZhbHVlIiwic2VyaWFsaXplZERhdGEiLCJzIiwiZXh0ZW5kIiwiYWpheFNldHRpbmdzIiwiY29udGVudFR5cGUiLCJwcm9jZXNzRGF0YSIsImNhY2hlIiwibWV0aG9kIiwidXBsb2FkUHJvZ3Jlc3MiLCJ4aHIiLCJ1cGxvYWQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJwZXJjZW50IiwicG9zaXRpb24iLCJsb2FkZWQiLCJ0b3RhbCIsImxlbmd0aENvbXB1dGFibGUiLCJNYXRoIiwiY2VpbCIsImJlZm9yZVNlbmQiLCJvIiwiZm9ybURhdGEiLCJhamF4IiwiZmlsZVVwbG9hZElmcmFtZSIsImdldERvYyIsImZyYW1lIiwiZG9jIiwiY29udGVudFdpbmRvdyIsImRvY3VtZW50IiwiZXJyIiwiY29udGVudERvY3VtZW50IiwiZG9TdWJtaXQiLCJjaGVja1N0YXRlIiwic3RhdGUiLCJpbyIsInJlYWR5U3RhdGUiLCJ0b0xvd2VyQ2FzZSIsImNiIiwiU0VSVkVSX0FCT1JUIiwidGltZW91dEhhbmRsZSIsImNsZWFyVGltZW91dCIsIiRmb3JtIiwic2V0QXR0cmlidXRlIiwiaWQiLCJ0ZXN0IiwidXJsIiwic2tpcEVuY29kaW5nT3ZlcnJpZGUiLCJlbmNvZGluZyIsImVuY3R5cGUiLCJ0aW1lb3V0IiwidGltZWRPdXQiLCJDTElFTlRfVElNRU9VVF9BQk9SVCIsImV4dHJhSW5wdXRzIiwibiIsImhhc093blByb3BlcnR5IiwiaXNQbGFpbk9iamVjdCIsImFwcGVuZFRvIiwiaWZyYW1lVGFyZ2V0IiwiJGlvIiwiYXR0YWNoRXZlbnQiLCJzdWJtaXQiLCJzdWJtaXRGbiIsImNyZWF0ZUVsZW1lbnQiLCJyZW1vdmVBdHRyIiwicmVtb3ZlIiwiYWJvcnRlZCIsImNhbGxiYWNrUHJvY2Vzc2VkIiwiYWJvcnQiLCJkZWZlcnJlZCIsInJlamVjdCIsImxvY2F0aW9uIiwiaHJlZiIsImlmcmFtZVNyYyIsImRldGFjaEV2ZW50IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImVyck1zZyIsInN0YXR1cyIsImlzWG1sIiwiZGF0YVR5cGUiLCJYTUxEb2N1bWVudCIsImlzWE1MRG9jIiwiYm9keSIsImlubmVySFRNTCIsImRvbUNoZWNrQ291bnQiLCJkb2NSb290IiwiZG9jdW1lbnRFbGVtZW50IiwicmVzcG9uc2VUZXh0IiwicmVzcG9uc2VYTUwiLCJnZXRSZXNwb25zZUhlYWRlciIsImhlYWRlciIsImhlYWRlcnMiLCJjb250ZW50LXR5cGUiLCJOdW1iZXIiLCJnZXRBdHRyaWJ1dGUiLCJzdGF0dXNUZXh0IiwiZHQiLCJzY3IiLCJ0ZXh0YXJlYSIsInRhIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJwcmUiLCJiIiwidGV4dENvbnRlbnQiLCJpbm5lclRleHQiLCJ0b1htbCIsImh0dHBEYXRhIiwiZXJyb3IiLCJzdWNjZXNzIiwiY29udGV4dCIsInJlc29sdmUiLCJnIiwidHJpZ2dlciIsImFjdGl2ZSIsImNvbXBsZXRlIiwiZWwiLCJzdWIiLCJEZWZlcnJlZCIsImVsZW1lbnRzIiwiRGF0ZSIsImdldFRpbWUiLCJjc3MiLCJnZXRBbGxSZXNwb25zZUhlYWRlcnMiLCJzZXRSZXF1ZXN0SGVhZGVyIiwiZXhlY0NvbW1hbmQiLCJpZ25vcmUiLCJnbG9iYWwiLCJkaXNhYmxlZCIsImNzcmZfdG9rZW4iLCJjc3JmX3BhcmFtIiwiZm9yY2VTeW5jIiwicGFyc2VYTUwiLCJBY3RpdmVYT2JqZWN0IiwiYXN5bmMiLCJsb2FkWE1MIiwiRE9NUGFyc2VyIiwicGFyc2VGcm9tU3RyaW5nIiwibm9kZU5hbWUiLCJwYXJzZUpTT04iLCJjdCIsInhtbCIsImluZGV4T2YiLCJkYXRhRmlsdGVyIiwiZ2xvYmFsRXZhbCIsImFjdGlvbiIsInRyaW0iLCJtYXRjaCIsInZldG8iLCJiZWZvcmVTZXJpYWxpemUiLCJxeCIsImZvcm1Ub0FycmF5Iiwic2VtYW50aWMiLCJiZWZvcmVTdWJtaXQiLCJxIiwidG9VcHBlckNhc2UiLCJjYWxsYmFja3MiLCJyZXNldEZvcm0iLCJjbGVhckZvcm0iLCJpbmNsdWRlSGlkZGVuIiwib2xkU3VjY2VzcyIsInJlcGxhY2VUYXJnZXQiLCJlYWNoIiwibWF4Iiwib2xkRXJyb3IiLCJvbGRDb21wbGV0ZSIsImZpbGVJbnB1dHMiLCJmaWx0ZXIiLCJoYXNGaWxlSW5wdXRzIiwibXAiLCJtdWx0aXBhcnQiLCJmaWxlQVBJIiwianF4aHIiLCJzaG91bGRVc2VGcmFtZSIsImlmcmFtZSIsImNsb3NlS2VlcEFsaXZlIiwicmVtb3ZlRGF0YSIsImsiLCJhamF4Rm9ybSIsImRlbGVnYXRpb24iLCJpc0Z1bmN0aW9uIiwib24iLCJzZWxlY3RvciIsImMiLCJpc1JlYWR5Iiwib2ZmIiwiYWpheEZvcm1VbmJpbmQiLCJiaW5kIiwidW5iaW5kIiwiZWxzIiwiaiIsInYiLCJqbWF4IiwiZmllbGRWYWx1ZSIsImNvbnN0cnVjdG9yIiwicmVxdWlyZWQiLCIkaW5wdXQiLCJpbnB1dCIsImZvcm1TZXJpYWxpemUiLCJmaWVsZFNlcmlhbGl6ZSIsInN1Y2Nlc3NmdWwiLCJtZXJnZSIsInRhZyIsInRhZ05hbWUiLCJjaGVja2VkIiwic2VsZWN0ZWRJbmRleCIsImluZGV4Iiwib3BzIiwib25lIiwib3AiLCJzZWxlY3RlZCIsImF0dHJpYnV0ZXMiLCJ0ZXh0IiwiY2xlYXJGaWVsZHMiLCJjbGVhcklucHV0cyIsInJlIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwicmVwbGFjZVdpdGgiLCJjbG9uZSIsInJlc2V0Iiwibm9kZVR5cGUiLCJlbmFibGUiLCJzZWxlY3QiLCIkc2VsIiwicGFyZW50IiwiZmluZCJdLCJtYXBwaW5ncyI6IkNBYUMsU0FBVUEsR0FDZSxrQkFBWEMsU0FBeUJBLE9BQU9DLElBRXZDRCxRQUFRLFVBQVdELEdBR25CQSxFQUE0QixtQkFBWixRQUEyQkcsT0FBU0MsT0FBT0MsUUFJbEUsU0FBU0MsR0FDVixZQXF6QkEsU0FBU0MsR0FBYUMsR0FFbEIsR0FBSUMsR0FBVUQsRUFBRUUsSUFDWEYsR0FBRUcsdUJBQ0hILEVBQUVJLGlCQUNGTixFQUFFRSxFQUFFSyxRQUFRQyxXQUFXTCxJQUkvQixRQUFTTSxHQUF5QlAsR0FFOUIsR0FBSUssR0FBU0wsRUFBRUssT0FDWEcsRUFBTVYsRUFBRU8sRUFDWixLQUFNRyxFQUFJQyxHQUFHLDhCQUFnQyxDQUV6QyxHQUFJQyxHQUFJRixFQUFJRyxR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LEdBQUc4TixNQUNqRHpOLEtBQUswRCxNQUFRLE9BUTdCMUUsRUFBRXdCLEdBQUcrTSxVQUFZLFdBQ2IsTUFBT3ZOLE1BQUs0TixLQUFLLFlBR1ksa0JBQWQ1TixNQUFLc1IsT0FBNkMsZ0JBQWR0UixNQUFLc1IsUUFBc0J0UixLQUFLc1IsTUFBTUMsV0FDakZ2UixLQUFLc1IsV0FRakJ0UyxFQUFFd0IsR0FBR2dSLE9BQVMsU0FBU3ZILEdBSW5CLE1BSFU5SixVQUFOOEosSUFDQUEsR0FBSSxHQUVEakssS0FBSzROLEtBQUssV0FDYjVOLEtBQUswTCxVQUFZekIsS0FRekJqTCxFQUFFd0IsR0FBR29RLFNBQVcsU0FBU2EsR0FJckIsTUFIZXRSLFVBQVhzUixJQUNBQSxHQUFTLEdBRU56UixLQUFLNE4sS0FBSyxXQUNiLEdBQUloTyxHQUFJSSxLQUFLRSxJQUNiLElBQVMsWUFBTE4sR0FBd0IsU0FBTEEsRUFDbkJJLEtBQUtzUSxRQUFVbUIsTUFFZCxJQUFrQyxVQUE5QnpSLEtBQUtxUSxRQUFRckssY0FBMkIsQ0FDN0MsR0FBSTBMLEdBQU8xUyxFQUFFZ0IsTUFBTTJSLE9BQU8sU0FDdEJGLElBQVVDLEVBQUssSUFBc0IsY0FBaEJBLEVBQUssR0FBR3hSLE1BRTdCd1IsRUFBS0UsS0FBSyxVQUFVaEIsVUFBUyxHQUVqQzVRLEtBQUs0USxTQUFXYSxNQU01QnpTLEVBQUV3QixHQUFHaEIsV0FBVzBCLE9BQVEiLCJmaWxlIjoianF1ZXJ5LmZvcm0ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBqUXVlcnkgRm9ybSBQbHVnaW5cbiAqIHZlcnNpb246IDMuNDYuMC0yMDEzLjExLjIxXG4gKiBSZXF1aXJlcyBqUXVlcnkgdjEuNSBvciBsYXRlclxuICogQ29weXJpZ2h0IChjKSAyMDEzIE0uIEFsc3VwXG4gKiBFeGFtcGxlcyBhbmQgZG9jdW1lbnRhdGlvbiBhdDogaHR0cDovL21hbHN1cC5jb20vanF1ZXJ5L2Zvcm0vXG4gKiBQcm9qZWN0IHJlcG9zaXRvcnk6IGh0dHBzOi8vZ2l0aHViLmNvbS9tYWxzdXAvZm9ybVxuICogRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGFuZCBHUEwgbGljZW5zZXMuXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbWFsc3VwL2Zvcm0jY29weXJpZ2h0LWFuZC1saWNlbnNlXG4gKi9cbi8qZ2xvYmFsIEFjdGl2ZVhPYmplY3QgKi9cblxuLy8gQU1EIHN1cHBvcnRcbihmdW5jdGlvbiAoZmFjdG9yeSkge1xuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgLy8gdXNpbmcgQU1EOyByZWdpc3RlciBhcyBhbm9uIG1vZHVsZVxuICAgICAgICBkZWZpbmUoWydqcXVlcnknXSwgZmFjdG9yeSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gbm8gQU1EOyBpbnZva2UgZGlyZWN0bHlcbiAgICAgICAgZmFjdG9yeSggKHR5cGVvZihqUXVlcnkpICE9ICd1bmRlZmluZWQnKSA/IGpRdWVyeSA6IHdpbmRvdy5aZXB0byApO1xuICAgIH1cbn1cblxuKGZ1bmN0aW9uKCQpIHtcblwidXNlIHN0cmljdFwiO1xuXG4vKlxuICAgIFVzYWdlIE5vdGU6XG4gICAgLS0tLS0tLS0tLS1cbiAgICBEbyBub3QgdXNlIGJvdGggYWpheFN1Ym1pdCBhbmQgYWpheEZvcm0gb24gdGhlIHNhbWUgZm9ybS4gIFRoZXNlXG4gICAgZnVuY3Rpb25zIGFyZSBtdXR1YWxseSBleGNsdXNpdmUuICBVc2UgYWpheFN1Ym1pdCBpZiB5b3Ugd2FudFxuICAgIHRvIGJpbmQgeW91ciBvd24gc3VibWl0IGhhbmRsZXIgdG8gdGhlIGZvcm0uICBGb3IgZXhhbXBsZSxcblxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgICAgICAkKCcjbXlGb3JtJykub24oJ3N1Ym1pdCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsgLy8gPC0tIGltcG9ydGFudFxuICAgICAgICAgICAgJCh0aGlzKS5hamF4U3VibWl0KHtcbiAgICAgICAgICAgICAgICB0YXJnZXQ6ICcjb3V0cHV0J1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgVXNlIGFqYXhGb3JtIHdoZW4geW91IHdhbnQgdGhlIHBsdWdpbiB0byBtYW5hZ2UgYWxsIHRoZSBldmVudCBiaW5kaW5nXG4gICAgZm9yIHlvdS4gIEZvciBleGFtcGxlLFxuXG4gICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICQoJyNteUZvcm0nKS5hamF4Rm9ybSh7XG4gICAgICAgICAgICB0YXJnZXQ6ICcjb3V0cHV0J1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIFlvdSBjYW4gYWxzbyB1c2UgYWpheEZvcm0gd2l0aCBkZWxlZ2F0aW9uIChyZXF1aXJlcyBqUXVlcnkgdjEuNyspLCBzbyB0aGVcbiAgICBmb3JtIGRvZXMgbm90IGhhdmUgdG8gZXhpc3Qgd2hlbiB5b3UgaW52b2tlIGFqYXhGb3JtOlxuXG4gICAgJCgnI215Rm9ybScpLmFqYXhGb3JtKHtcbiAgICAgICAgZGVsZWdhdGlvbjogdHJ1ZSxcbiAgICAgICAgdGFyZ2V0OiAnI291dHB1dCdcbiAgICB9KTtcblxuICAgIFdoZW4gdXNpbmcgYWpheEZvcm0sIHRoZSBhamF4U3VibWl0IGZ1bmN0aW9uIHdpbGwgYmUgaW52b2tlZCBmb3IgeW91XG4gICAgYXQgdGhlIGFwcHJvcHJpYXRlIHRpbWUuXG4qL1xuXG4vKipcbiAqIEZlYXR1cmUgZGV0ZWN0aW9uXG4gKi9cbnZhciBmZWF0dXJlID0ge307XG5mZWF0dXJlLmZpbGVhcGkgPSAkKFwiPGlucHV0IHR5cGU9J2ZpbGUnLz5cIikuZ2V0KDApLmZpbGVzICE9PSB1bmRlZmluZWQ7XG5mZWF0dXJlLmZvcm1kYXRhID0gd2luZG93LkZvcm1EYXRhICE9PSB1bmRlZmluZWQ7XG5cbnZhciBoYXNQcm9wID0gISEkLmZuLnByb3A7XG5cbi8vIGF0dHIyIHVzZXMgcHJvcCB3aGVuIGl0IGNhbiBidXQgY2hlY2tzIHRoZSByZXR1cm4gdHlwZSBmb3Jcbi8vIGFuIGV4cGVjdGVkIHN0cmluZy4gIHRoaXMgYWNjb3VudHMgZm9yIHRoZSBjYXNlIHdoZXJlIGEgZm9ybSBcbi8vIGNvbnRhaW5zIGlucHV0cyB3aXRoIG5hbWVzIGxpa2UgXCJhY3Rpb25cIiBvciBcIm1ldGhvZFwiOyBpbiB0aG9zZVxuLy8gY2FzZXMgXCJwcm9wXCIgcmV0dXJucyB0aGUgZWxlbWVudFxuJC5mbi5hdHRyMiA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICggISBoYXNQcm9wIClcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0ci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIHZhciB2YWwgPSB0aGlzLnByb3AuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAoICggdmFsICYmIHZhbC5qcXVlcnkgKSB8fCB0eXBlb2YgdmFsID09PSAnc3RyaW5nJyApXG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgcmV0dXJuIHRoaXMuYXR0ci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufTtcblxuLyoqXG4gKiBhamF4U3VibWl0KCkgcHJvdmlkZXMgYSBtZWNoYW5pc20gZm9yIGltbWVkaWF0ZWx5IHN1Ym1pdHRpbmdcbiAqIGFuIEhUTUwgZm9ybSB1c2luZyBBSkFYLlxuICovXG4kLmZuLmFqYXhTdWJtaXQgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgLypqc2hpbnQgc2NyaXB0dXJsOnRydWUgKi9cblxuICAgIC8vIGZhc3QgZmFpbCBpZiBub3RoaW5nIHNlbGVjdGVkIChodHRwOi8vZGV2LmpxdWVyeS5jb20vdGlja2V0LzI3NTIpXG4gICAgaWYgKCF0aGlzLmxlbmd0aCkge1xuICAgICAgICBsb2coJ2FqYXhTdWJtaXQ6IHNraXBwaW5nIHN1Ym1pdCBwcm9jZXNzIC0gbm8gZWxlbWVudCBzZWxlY3RlZCcpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICB2YXIgbWV0aG9kLCBhY3Rpb24sIHVybCwgJGZvcm0gPSB0aGlzO1xuXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgb3B0aW9ucyA9IHsgc3VjY2Vzczogb3B0aW9ucyB9O1xuICAgIH1cbiAgICBlbHNlIGlmICggb3B0aW9ucyA9PT0gdW5kZWZpbmVkICkge1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgfVxuXG4gICAgbWV0aG9kID0gb3B0aW9ucy50eXBlIHx8IHRoaXMuYXR0cjIoJ21ldGhvZCcpO1xuICAgIGFjdGlvbiA9IG9wdGlvbnMudXJsICB8fCB0aGlzLmF0dHIyKCdhY3Rpb24nKTtcblxuICAgIHVybCA9ICh0eXBlb2YgYWN0aW9uID09PSAnc3RyaW5nJykgPyAkLnRyaW0oYWN0aW9uKSA6ICcnO1xuICAgIHVybCA9IHVybCB8fCB3aW5kb3cubG9jYXRpb24uaHJlZiB8fCAnJztcbiAgICBpZiAodXJsKSB7XG4gICAgICAgIC8vIGNsZWFuIHVybCAoZG9uJ3QgaW5jbHVkZSBoYXNoIHZhdWUpXG4gICAgICAgIHVybCA9ICh1cmwubWF0Y2goL14oW14jXSspLyl8fFtdKVsxXTtcbiAgICB9XG5cbiAgICBvcHRpb25zID0gJC5leHRlbmQodHJ1ZSwge1xuICAgICAgICB1cmw6ICB1cmwsXG4gICAgICAgIHN1Y2Nlc3M6ICQuYWpheFNldHRpbmdzLnN1Y2Nlc3MsXG4gICAgICAgIHR5cGU6IG1ldGhvZCB8fCAkLmFqYXhTZXR0aW5ncy50eXBlLFxuICAgICAgICBpZnJhbWVTcmM6IC9eaHR0cHMvaS50ZXN0KHdpbmRvdy5sb2NhdGlvbi5ocmVmIHx8ICcnKSA/ICdqYXZhc2NyaXB0OmZhbHNlJyA6ICdhYm91dDpibGFuaydcbiAgICB9LCBvcHRpb25zKTtcblxuICAgIC8vIGhvb2sgZm9yIG1hbmlwdWxhdGluZyB0aGUgZm9ybSBkYXRhIGJlZm9yZSBpdCBpcyBleHRyYWN0ZWQ7XG4gICAgLy8gY29udmVuaWVudCBmb3IgdXNlIHdpdGggcmljaCBlZGl0b3JzIGxpa2UgdGlueU1DRSBvciBGQ0tFZGl0b3JcbiAgICB2YXIgdmV0byA9IHt9O1xuICAgIHRoaXMudHJpZ2dlcignZm9ybS1wcmUtc2VyaWFsaXplJywgW3RoaXMsIG9wdGlvbnMsIHZldG9dKTtcbiAgICBpZiAodmV0by52ZXRvKSB7XG4gICAgICAgIGxvZygnYWpheFN1Ym1pdDogc3VibWl0IHZldG9lZCB2aWEgZm9ybS1wcmUtc2VyaWFsaXplIHRyaWdnZXInKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLy8gcHJvdmlkZSBvcHBvcnR1bml0eSB0byBhbHRlciBmb3JtIGRhdGEgYmVmb3JlIGl0IGlzIHNlcmlhbGl6ZWRcbiAgICBpZiAob3B0aW9ucy5iZWZvcmVTZXJpYWxpemUgJiYgb3B0aW9ucy5iZWZvcmVTZXJpYWxpemUodGhpcywgb3B0aW9ucykgPT09IGZhbHNlKSB7XG4gICAgICAgIGxvZygnYWpheFN1Ym1pdDogc3VibWl0IGFib3J0ZWQgdmlhIGJlZm9yZVNlcmlhbGl6ZSBjYWxsYmFjaycpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICB2YXIgdHJhZGl0aW9uYWwgPSBvcHRpb25zLnRyYWRpdGlvbmFsO1xuICAgIGlmICggdHJhZGl0aW9uYWwgPT09IHVuZGVmaW5lZCApIHtcbiAgICAgICAgdHJhZGl0aW9uYWwgPSAkLmFqYXhTZXR0aW5ncy50cmFkaXRpb25hbDtcbiAgICB9XG5cbiAgICB2YXIgZWxlbWVudHMgPSBbXTtcbiAgICB2YXIgcXgsIGEgPSB0aGlzLmZvcm1Ub0FycmF5KG9wdGlvbnMuc2VtYW50aWMsIGVsZW1lbnRzKTtcbiAgICBpZiAob3B0aW9ucy5kYXRhKSB7XG4gICAgICAgIG9wdGlvbnMuZXh0cmFEYXRhID0gb3B0aW9ucy5kYXRhO1xuICAgICAgICBxeCA9ICQucGFyYW0ob3B0aW9ucy5kYXRhLCB0cmFkaXRpb25hbCk7XG4gICAgfVxuXG4gICAgLy8gZ2l2ZSBwcmUtc3VibWl0IGNhbGxiYWNrIGFuIG9wcG9ydHVuaXR5IHRvIGFib3J0IHRoZSBzdWJtaXRcbiAgICBpZiAob3B0aW9ucy5iZWZvcmVTdWJtaXQgJiYgb3B0aW9ucy5iZWZvcmVTdWJtaXQoYSwgdGhpcywgb3B0aW9ucykgPT09IGZhbHNlKSB7XG4gICAgICAgIGxvZygnYWpheFN1Ym1pdDogc3VibWl0IGFib3J0ZWQgdmlhIGJlZm9yZVN1Ym1pdCBjYWxsYmFjaycpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvLyBmaXJlIHZldG9hYmxlICd2YWxpZGF0ZScgZXZlbnRcbiAgICB0aGlzLnRyaWdnZXIoJ2Zvcm0tc3VibWl0LXZhbGlkYXRlJywgW2EsIHRoaXMsIG9wdGlvbnMsIHZldG9dKTtcbiAgICBpZiAodmV0by52ZXRvKSB7XG4gICAgICAgIGxvZygnYWpheFN1Ym1pdDogc3VibWl0IHZldG9lZCB2aWEgZm9ybS1zdWJtaXQtdmFsaWRhdGUgdHJpZ2dlcicpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICB2YXIgcSA9ICQucGFyYW0oYSwgdHJhZGl0aW9uYWwpO1xuICAgIGlmIChxeCkge1xuICAgICAgICBxID0gKCBxID8gKHEgKyAnJicgKyBxeCkgOiBxeCApO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy50eXBlLnRvVXBwZXJDYXNlKCkgPT0gJ0dFVCcpIHtcbiAgICAgICAgb3B0aW9ucy51cmwgKz0gKG9wdGlvbnMudXJsLmluZGV4T2YoJz8nKSA+PSAwID8gJyYnIDogJz8nKSArIHE7XG4gICAgICAgIG9wdGlvbnMuZGF0YSA9IG51bGw7ICAvLyBkYXRhIGlzIG51bGwgZm9yICdnZXQnXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBvcHRpb25zLmRhdGEgPSBxOyAvLyBkYXRhIGlzIHRoZSBxdWVyeSBzdHJpbmcgZm9yICdwb3N0J1xuICAgIH1cblxuICAgIHZhciBjYWxsYmFja3MgPSBbXTtcbiAgICBpZiAob3B0aW9ucy5yZXNldEZvcm0pIHtcbiAgICAgICAgY2FsbGJhY2tzLnB1c2goZnVuY3Rpb24oKSB7ICRmb3JtLnJlc2V0Rm9ybSgpOyB9KTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuY2xlYXJGb3JtKSB7XG4gICAgICAgIGNhbGxiYWNrcy5wdXNoKGZ1bmN0aW9uKCkgeyAkZm9ybS5jbGVhckZvcm0ob3B0aW9ucy5pbmNsdWRlSGlkZGVuKTsgfSk7XG4gICAgfVxuXG4gICAgLy8gcGVyZm9ybSBhIGxvYWQgb24gdGhlIHRhcmdldCBvbmx5IGlmIGRhdGFUeXBlIGlzIG5vdCBwcm92aWRlZFxuICAgIGlmICghb3B0aW9ucy5kYXRhVHlwZSAmJiBvcHRpb25zLnRhcmdldCkge1xuICAgICAgICB2YXIgb2xkU3VjY2VzcyA9IG9wdGlvbnMuc3VjY2VzcyB8fCBmdW5jdGlvbigpe307XG4gICAgICAgIGNhbGxiYWNrcy5wdXNoKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBmbiA9IG9wdGlvbnMucmVwbGFjZVRhcmdldCA/ICdyZXBsYWNlV2l0aCcgOiAnaHRtbCc7XG4gICAgICAgICAgICAkKG9wdGlvbnMudGFyZ2V0KVtmbl0oZGF0YSkuZWFjaChvbGRTdWNjZXNzLCBhcmd1bWVudHMpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAob3B0aW9ucy5zdWNjZXNzKSB7XG4gICAgICAgIGNhbGxiYWNrcy5wdXNoKG9wdGlvbnMuc3VjY2Vzcyk7XG4gICAgfVxuXG4gICAgb3B0aW9ucy5zdWNjZXNzID0gZnVuY3Rpb24oZGF0YSwgc3RhdHVzLCB4aHIpIHsgLy8galF1ZXJ5IDEuNCsgcGFzc2VzIHhociBhcyAzcmQgYXJnXG4gICAgICAgIHZhciBjb250ZXh0ID0gb3B0aW9ucy5jb250ZXh0IHx8IHRoaXMgOyAgICAvLyBqUXVlcnkgMS40KyBzdXBwb3J0cyBzY29wZSBjb250ZXh0XG4gICAgICAgIGZvciAodmFyIGk9MCwgbWF4PWNhbGxiYWNrcy5sZW5ndGg7IGkgPCBtYXg7IGkrKykge1xuICAgICAgICAgICAgY2FsbGJhY2tzW2ldLmFwcGx5KGNvbnRleHQsIFtkYXRhLCBzdGF0dXMsIHhociB8fCAkZm9ybSwgJGZvcm1dKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAob3B0aW9ucy5lcnJvcikge1xuICAgICAgICB2YXIgb2xkRXJyb3IgPSBvcHRpb25zLmVycm9yO1xuICAgICAgICBvcHRpb25zLmVycm9yID0gZnVuY3Rpb24oeGhyLCBzdGF0dXMsIGVycm9yKSB7XG4gICAgICAgICAgICB2YXIgY29udGV4dCA9IG9wdGlvbnMuY29udGV4dCB8fCB0aGlzO1xuICAgICAgICAgICAgb2xkRXJyb3IuYXBwbHkoY29udGV4dCwgW3hociwgc3RhdHVzLCBlcnJvciwgJGZvcm1dKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAgaWYgKG9wdGlvbnMuY29tcGxldGUpIHtcbiAgICAgICAgdmFyIG9sZENvbXBsZXRlID0gb3B0aW9ucy5jb21wbGV0ZTtcbiAgICAgICAgb3B0aW9ucy5jb21wbGV0ZSA9IGZ1bmN0aW9uKHhociwgc3RhdHVzKSB7XG4gICAgICAgICAgICB2YXIgY29udGV4dCA9IG9wdGlvbnMuY29udGV4dCB8fCB0aGlzO1xuICAgICAgICAgICAgb2xkQ29tcGxldGUuYXBwbHkoY29udGV4dCwgW3hociwgc3RhdHVzLCAkZm9ybV0pO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIGFyZSB0aGVyZSBmaWxlcyB0byB1cGxvYWQ/XG5cbiAgICAvLyBbdmFsdWVdIChpc3N1ZSAjMTEzKSwgYWxzbyBzZWUgY29tbWVudDpcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbWFsc3VwL2Zvcm0vY29tbWl0LzU4ODMwNmFlZGJhMWRlMDEzODgwMzJkNWY0MmE2MDE1OWVlYTkyMjgjY29tbWl0Y29tbWVudC0yMTgwMjE5XG4gICAgdmFyIGZpbGVJbnB1dHMgPSAkKCdpbnB1dFt0eXBlPWZpbGVdOmVuYWJsZWQnLCB0aGlzKS5maWx0ZXIoZnVuY3Rpb24oKSB7IHJldHVybiAkKHRoaXMpLnZhbCgpICE9PSAnJzsgfSk7XG5cbiAgICB2YXIgaGFzRmlsZUlucHV0cyA9IGZpbGVJbnB1dHMubGVuZ3RoID4gMDtcbiAgICB2YXIgbXAgPSAnbXVsdGlwYXJ0L2Zvcm0tZGF0YSc7XG4gICAgdmFyIG11bHRpcGFydCA9ICgkZm9ybS5hdHRyKCdlbmN0eXBlJykgPT0gbXAgfHwgJGZvcm0uYXR0cignZW5jb2RpbmcnKSA9PSBtcCk7XG5cbiAgICB2YXIgZmlsZUFQSSA9IGZlYXR1cmUuZmlsZWFwaSAmJiBmZWF0dXJlLmZvcm1kYXRhO1xuICAgIGxvZyhcImZpbGVBUEkgOlwiICsgZmlsZUFQSSk7XG4gICAgdmFyIHNob3VsZFVzZUZyYW1lID0gKGhhc0ZpbGVJbnB1dHMgfHwgbXVsdGlwYXJ0KSAmJiAhZmlsZUFQSTtcblxuICAgIHZhciBqcXhocjtcblxuICAgIC8vIG9wdGlvbnMuaWZyYW1lIGFsbG93cyB1c2VyIHRvIGZvcmNlIGlmcmFtZSBtb2RlXG4gICAgLy8gMDYtTk9WLTA5OiBub3cgZGVmYXVsdGluZyB0byBpZnJhbWUgbW9kZSBpZiBmaWxlIGlucHV0IGlzIGRldGVjdGVkXG4gICAgaWYgKG9wdGlvbnMuaWZyYW1lICE9PSBmYWxzZSAmJiAob3B0aW9ucy5pZnJhbWUgfHwgc2hvdWxkVXNlRnJhbWUpKSB7XG4gICAgICAgIC8vIGhhY2sgdG8gZml4IFNhZmFyaSBoYW5nICh0aGFua3MgdG8gVGltIE1vbGVuZGlqayBmb3IgdGhpcylcbiAgICAgICAgLy8gc2VlOiAgaHR0cDovL2dyb3Vwcy5nb29nbGUuY29tL2dyb3VwL2pxdWVyeS1kZXYvYnJvd3NlX3RocmVhZC90aHJlYWQvMzYzOTViN2FiNTEwZGQ1ZFxuICAgICAgICBpZiAob3B0aW9ucy5jbG9zZUtlZXBBbGl2ZSkge1xuICAgICAgICAgICAgJC5nZXQob3B0aW9ucy5jbG9zZUtlZXBBbGl2ZSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAganF4aHIgPSBmaWxlVXBsb2FkSWZyYW1lKGEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBqcXhociA9IGZpbGVVcGxvYWRJZnJhbWUoYSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoKGhhc0ZpbGVJbnB1dHMgfHwgbXVsdGlwYXJ0KSAmJiBmaWxlQVBJKSB7XG4gICAgICAgIGpxeGhyID0gZmlsZVVwbG9hZFhocihhKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGpxeGhyID0gJC5hamF4KG9wdGlvbnMpO1xuICAgIH1cblxuICAgICRmb3JtLnJlbW92ZURhdGEoJ2pxeGhyJykuZGF0YSgnanF4aHInLCBqcXhocik7XG5cbiAgICAvLyBjbGVhciBlbGVtZW50IGFycmF5XG4gICAgZm9yICh2YXIgaz0wOyBrIDwgZWxlbWVudHMubGVuZ3RoOyBrKyspXG4gICAgICAgIGVsZW1lbnRzW2tdID0gbnVsbDtcblxuICAgIC8vIGZpcmUgJ25vdGlmeScgZXZlbnRcbiAgICB0aGlzLnRyaWdnZXIoJ2Zvcm0tc3VibWl0LW5vdGlmeScsIFt0aGlzLCBvcHRpb25zXSk7XG4gICAgcmV0dXJuIHRoaXM7XG5cbiAgICAvLyB1dGlsaXR5IGZuIGZvciBkZWVwIHNlcmlhbGl6YXRpb25cbiAgICBmdW5jdGlvbiBkZWVwU2VyaWFsaXplKGV4dHJhRGF0YSl7XG4gICAgICAgIHZhciBzZXJpYWxpemVkID0gJC5wYXJhbShleHRyYURhdGEsIG9wdGlvbnMudHJhZGl0aW9uYWwpLnNwbGl0KCcmJyk7XG4gICAgICAgIHZhciBsZW4gPSBzZXJpYWxpemVkLmxlbmd0aDtcbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgICB2YXIgaSwgcGFydDtcbiAgICAgICAgZm9yIChpPTA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgLy8gIzI1MjsgdW5kbyBwYXJhbSBzcGFjZSByZXBsYWNlbWVudFxuICAgICAgICAgICAgc2VyaWFsaXplZFtpXSA9IHNlcmlhbGl6ZWRbaV0ucmVwbGFjZSgvXFwrL2csJyAnKTtcbiAgICAgICAgICAgIHBhcnQgPSBzZXJpYWxpemVkW2ldLnNwbGl0KCc9Jyk7XG4gICAgICAgICAgICAvLyAjMjc4OyB1c2UgYXJyYXkgaW5zdGVhZCBvZiBvYmplY3Qgc3RvcmFnZSwgZmF2b3JpbmcgYXJyYXkgc2VyaWFsaXphdGlvbnNcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKFtkZWNvZGVVUklDb21wb25lbnQocGFydFswXSksIGRlY29kZVVSSUNvbXBvbmVudChwYXJ0WzFdKV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgIC8vIFhNTEh0dHBSZXF1ZXN0IExldmVsIDIgZmlsZSB1cGxvYWRzIChiaWcgaGF0IHRpcCB0byBmcmFuY29pczJtZXR6KVxuICAgIGZ1bmN0aW9uIGZpbGVVcGxvYWRYaHIoYSkge1xuICAgICAgICB2YXIgZm9ybWRhdGEgPSBuZXcgRm9ybURhdGEoKTtcblxuICAgICAgICBmb3IgKHZhciBpPTA7IGkgPCBhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBmb3JtZGF0YS5hcHBlbmQoYVtpXS5uYW1lLCBhW2ldLnZhbHVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zLmV4dHJhRGF0YSkge1xuICAgICAgICAgICAgdmFyIHNlcmlhbGl6ZWREYXRhID0gZGVlcFNlcmlhbGl6ZShvcHRpb25zLmV4dHJhRGF0YSk7XG4gICAgICAgICAgICBmb3IgKGk9MDsgaSA8IHNlcmlhbGl6ZWREYXRhLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgICAgIGlmIChzZXJpYWxpemVkRGF0YVtpXSlcbiAgICAgICAgICAgICAgICAgICAgZm9ybWRhdGEuYXBwZW5kKHNlcmlhbGl6ZWREYXRhW2ldWzBdLCBzZXJpYWxpemVkRGF0YVtpXVsxXSk7XG4gICAgICAgIH1cblxuICAgICAgICBvcHRpb25zLmRhdGEgPSBudWxsO1xuXG4gICAgICAgIHZhciBzID0gJC5leHRlbmQodHJ1ZSwge30sICQuYWpheFNldHRpbmdzLCBvcHRpb25zLCB7XG4gICAgICAgICAgICBjb250ZW50VHlwZTogZmFsc2UsXG4gICAgICAgICAgICBwcm9jZXNzRGF0YTogZmFsc2UsXG4gICAgICAgICAgICBjYWNoZTogZmFsc2UsXG4gICAgICAgICAgICB0eXBlOiBtZXRob2QgfHwgJ1BPU1QnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChvcHRpb25zLnVwbG9hZFByb2dyZXNzKSB7XG4gICAgICAgICAgICAvLyB3b3JrYXJvdW5kIGJlY2F1c2UganFYSFIgZG9lcyBub3QgZXhwb3NlIHVwbG9hZCBwcm9wZXJ0eVxuICAgICAgICAgICAgcy54aHIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgeGhyID0gJC5hamF4U2V0dGluZ3MueGhyKCk7XG4gICAgICAgICAgICAgICAgaWYgKHhoci51cGxvYWQpIHtcbiAgICAgICAgICAgICAgICAgICAgeGhyLnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGVyY2VudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG9zaXRpb24gPSBldmVudC5sb2FkZWQgfHwgZXZlbnQucG9zaXRpb247IC8qZXZlbnQucG9zaXRpb24gaXMgZGVwcmVjYXRlZCovXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG90YWwgPSBldmVudC50b3RhbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5sZW5ndGhDb21wdXRhYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVyY2VudCA9IE1hdGguY2VpbChwb3NpdGlvbiAvIHRvdGFsICogMTAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMudXBsb2FkUHJvZ3Jlc3MoZXZlbnQsIHBvc2l0aW9uLCB0b3RhbCwgcGVyY2VudCk7XG4gICAgICAgICAgICAgICAgICAgIH0sIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHhocjtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBzLmRhdGEgPSBudWxsO1xuICAgICAgICB2YXIgYmVmb3JlU2VuZCA9IHMuYmVmb3JlU2VuZDtcbiAgICAgICAgcy5iZWZvcmVTZW5kID0gZnVuY3Rpb24oeGhyLCBvKSB7XG4gICAgICAgICAgICAvL1NlbmQgRm9ybURhdGEoKSBwcm92aWRlZCBieSB1c2VyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5mb3JtRGF0YSlcbiAgICAgICAgICAgICAgICBvLmRhdGEgPSBvcHRpb25zLmZvcm1EYXRhO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIG8uZGF0YSA9IGZvcm1kYXRhO1xuICAgICAgICAgICAgaWYoYmVmb3JlU2VuZClcbiAgICAgICAgICAgICAgICBiZWZvcmVTZW5kLmNhbGwodGhpcywgeGhyLCBvKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuICQuYWpheChzKTtcbiAgICB9XG5cbiAgICAvLyBwcml2YXRlIGZ1bmN0aW9uIGZvciBoYW5kbGluZyBmaWxlIHVwbG9hZHMgKGhhdCB0aXAgdG8gWUFIT08hKVxuICAgIGZ1bmN0aW9uIGZpbGVVcGxvYWRJZnJhbWUoYSkge1xuICAgICAgICB2YXIgZm9ybSA9ICRmb3JtWzBdLCBlbCwgaSwgcywgZywgaWQsICRpbywgaW8sIHhociwgc3ViLCBuLCB0aW1lZE91dCwgdGltZW91dEhhbmRsZTtcbiAgICAgICAgdmFyIGRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xuXG4gICAgICAgIC8vICMzNDFcbiAgICAgICAgZGVmZXJyZWQuYWJvcnQgPSBmdW5jdGlvbihzdGF0dXMpIHtcbiAgICAgICAgICAgIHhoci5hYm9ydChzdGF0dXMpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChhKSB7XG4gICAgICAgICAgICAvLyBlbnN1cmUgdGhhdCBldmVyeSBzZXJpYWxpemVkIGlucHV0IGlzIHN0aWxsIGVuYWJsZWRcbiAgICAgICAgICAgIGZvciAoaT0wOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBlbCA9ICQoZWxlbWVudHNbaV0pO1xuICAgICAgICAgICAgICAgIGlmICggaGFzUHJvcCApXG4gICAgICAgICAgICAgICAgICAgIGVsLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgZWwucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHMgPSAkLmV4dGVuZCh0cnVlLCB7fSwgJC5hamF4U2V0dGluZ3MsIG9wdGlvbnMpO1xuICAgICAgICBzLmNvbnRleHQgPSBzLmNvbnRleHQgfHwgcztcbiAgICAgICAgaWQgPSAnanFGb3JtSU8nICsgKG5ldyBEYXRlKCkuZ2V0VGltZSgpKTtcbiAgICAgICAgaWYgKHMuaWZyYW1lVGFyZ2V0KSB7XG4gICAgICAgICAgICAkaW8gPSAkKHMuaWZyYW1lVGFyZ2V0KTtcbiAgICAgICAgICAgIG4gPSAkaW8uYXR0cjIoJ25hbWUnKTtcbiAgICAgICAgICAgIGlmICghbilcbiAgICAgICAgICAgICAgICAgJGlvLmF0dHIyKCduYW1lJywgaWQpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGlkID0gbjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICRpbyA9ICQoJzxpZnJhbWUgbmFtZT1cIicgKyBpZCArICdcIiBzcmM9XCInKyBzLmlmcmFtZVNyYyArJ1wiIC8+Jyk7XG4gICAgICAgICAgICAkaW8uY3NzKHsgcG9zaXRpb246ICdhYnNvbHV0ZScsIHRvcDogJy0xMDAwcHgnLCBsZWZ0OiAnLTEwMDBweCcgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaW8gPSAkaW9bMF07XG5cblxuICAgICAgICB4aHIgPSB7IC8vIG1vY2sgb2JqZWN0XG4gICAgICAgICAgICBhYm9ydGVkOiAwLFxuICAgICAgICAgICAgcmVzcG9uc2VUZXh0OiBudWxsLFxuICAgICAgICAgICAgcmVzcG9uc2VYTUw6IG51bGwsXG4gICAgICAgICAgICBzdGF0dXM6IDAsXG4gICAgICAgICAgICBzdGF0dXNUZXh0OiAnbi9hJyxcbiAgICAgICAgICAgIGdldEFsbFJlc3BvbnNlSGVhZGVyczogZnVuY3Rpb24oKSB7fSxcbiAgICAgICAgICAgIGdldFJlc3BvbnNlSGVhZGVyOiBmdW5jdGlvbigpIHt9LFxuICAgICAgICAgICAgc2V0UmVxdWVzdEhlYWRlcjogZnVuY3Rpb24oKSB7fSxcbiAgICAgICAgICAgIGFib3J0OiBmdW5jdGlvbihzdGF0dXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgZSA9IChzdGF0dXMgPT09ICd0aW1lb3V0JyA/ICd0aW1lb3V0JyA6ICdhYm9ydGVkJyk7XG4gICAgICAgICAgICAgICAgbG9nKCdhYm9ydGluZyB1cGxvYWQuLi4gJyArIGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuYWJvcnRlZCA9IDE7XG5cbiAgICAgICAgICAgICAgICB0cnkgeyAvLyAjMjE0LCAjMjU3XG4gICAgICAgICAgICAgICAgICAgIGlmIChpby5jb250ZW50V2luZG93LmRvY3VtZW50LmV4ZWNDb21tYW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpby5jb250ZW50V2luZG93LmRvY3VtZW50LmV4ZWNDb21tYW5kKCdTdG9wJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2goaWdub3JlKSB7fVxuXG4gICAgICAgICAgICAgICAgJGlvLmF0dHIoJ3NyYycsIHMuaWZyYW1lU3JjKTsgLy8gYWJvcnQgb3AgaW4gcHJvZ3Jlc3NcbiAgICAgICAgICAgICAgICB4aHIuZXJyb3IgPSBlO1xuICAgICAgICAgICAgICAgIGlmIChzLmVycm9yKVxuICAgICAgICAgICAgICAgICAgICBzLmVycm9yLmNhbGwocy5jb250ZXh0LCB4aHIsIGUsIHN0YXR1cyk7XG4gICAgICAgICAgICAgICAgaWYgKGcpXG4gICAgICAgICAgICAgICAgICAgICQuZXZlbnQudHJpZ2dlcihcImFqYXhFcnJvclwiLCBbeGhyLCBzLCBlXSk7XG4gICAgICAgICAgICAgICAgaWYgKHMuY29tcGxldGUpXG4gICAgICAgICAgICAgICAgICAgIHMuY29tcGxldGUuY2FsbChzLmNvbnRleHQsIHhociwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgZyA9IHMuZ2xvYmFsO1xuICAgICAgICAvLyB0cmlnZ2VyIGFqYXggZ2xvYmFsIGV2ZW50cyBzbyB0aGF0IGFjdGl2aXR5L2Jsb2NrIGluZGljYXRvcnMgd29yayBsaWtlIG5vcm1hbFxuICAgICAgICBpZiAoZyAmJiAwID09PSAkLmFjdGl2ZSsrKSB7XG4gICAgICAgICAgICAkLmV2ZW50LnRyaWdnZXIoXCJhamF4U3RhcnRcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGcpIHtcbiAgICAgICAgICAgICQuZXZlbnQudHJpZ2dlcihcImFqYXhTZW5kXCIsIFt4aHIsIHNdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzLmJlZm9yZVNlbmQgJiYgcy5iZWZvcmVTZW5kLmNhbGwocy5jb250ZXh0LCB4aHIsIHMpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgaWYgKHMuZ2xvYmFsKSB7XG4gICAgICAgICAgICAgICAgJC5hY3RpdmUtLTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdCgpO1xuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkO1xuICAgICAgICB9XG4gICAgICAgIGlmICh4aHIuYWJvcnRlZCkge1xuICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KCk7XG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQ7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBhZGQgc3VibWl0dGluZyBlbGVtZW50IHRvIGRhdGEgaWYgd2Uga25vdyBpdFxuICAgICAgICBzdWIgPSBmb3JtLmNsaztcbiAgICAgICAgaWYgKHN1Yikge1xuICAgICAgICAgICAgbiA9IHN1Yi5uYW1lO1xuICAgICAgICAgICAgaWYgKG4gJiYgIXN1Yi5kaXNhYmxlZCkge1xuICAgICAgICAgICAgICAgIHMuZXh0cmFEYXRhID0gcy5leHRyYURhdGEgfHwge307XG4gICAgICAgICAgICAgICAgcy5leHRyYURhdGFbbl0gPSBzdWIudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKHN1Yi50eXBlID09IFwiaW1hZ2VcIikge1xuICAgICAgICAgICAgICAgICAgICBzLmV4dHJhRGF0YVtuKycueCddID0gZm9ybS5jbGtfeDtcbiAgICAgICAgICAgICAgICAgICAgcy5leHRyYURhdGFbbisnLnknXSA9IGZvcm0uY2xrX3k7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIENMSUVOVF9USU1FT1VUX0FCT1JUID0gMTtcbiAgICAgICAgdmFyIFNFUlZFUl9BQk9SVCA9IDI7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIGdldERvYyhmcmFtZSkge1xuICAgICAgICAgICAgLyogaXQgbG9va3MgbGlrZSBjb250ZW50V2luZG93IG9yIGNvbnRlbnREb2N1bWVudCBkbyBub3RcbiAgICAgICAgICAgICAqIGNhcnJ5IHRoZSBwcm90b2NvbCBwcm9wZXJ0eSBpbiBpZTgsIHdoZW4gcnVubmluZyB1bmRlciBzc2xcbiAgICAgICAgICAgICAqIGZyYW1lLmRvY3VtZW50IGlzIHRoZSBvbmx5IHZhbGlkIHJlc3BvbnNlIGRvY3VtZW50LCBzaW5jZVxuICAgICAgICAgICAgICogdGhlIHByb3RvY29sIGlzIGtub3cgYnV0IG5vdCBvbiB0aGUgb3RoZXIgdHdvIG9iamVjdHMuIHN0cmFuZ2U/XG4gICAgICAgICAgICAgKiBcIlNhbWUgb3JpZ2luIHBvbGljeVwiIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU2FtZV9vcmlnaW5fcG9saWN5XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIGRvYyA9IG51bGw7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIElFOCBjYXNjYWRpbmcgYWNjZXNzIGNoZWNrXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChmcmFtZS5jb250ZW50V2luZG93KSB7XG4gICAgICAgICAgICAgICAgICAgIGRvYyA9IGZyYW1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaChlcnIpIHtcbiAgICAgICAgICAgICAgICAvLyBJRTggYWNjZXNzIGRlbmllZCB1bmRlciBzc2wgJiBtaXNzaW5nIHByb3RvY29sXG4gICAgICAgICAgICAgICAgbG9nKCdjYW5ub3QgZ2V0IGlmcmFtZS5jb250ZW50V2luZG93IGRvY3VtZW50OiAnICsgZXJyKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGRvYykgeyAvLyBzdWNjZXNzZnVsIGdldHRpbmcgY29udGVudFxuICAgICAgICAgICAgICAgIHJldHVybiBkb2M7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyeSB7IC8vIHNpbXBseSBjaGVja2luZyBtYXkgdGhyb3cgaW4gaWU4IHVuZGVyIHNzbCBvciBtaXNtYXRjaGVkIHByb3RvY29sXG4gICAgICAgICAgICAgICAgZG9jID0gZnJhbWUuY29udGVudERvY3VtZW50ID8gZnJhbWUuY29udGVudERvY3VtZW50IDogZnJhbWUuZG9jdW1lbnQ7XG4gICAgICAgICAgICB9IGNhdGNoKGVycikge1xuICAgICAgICAgICAgICAgIC8vIGxhc3QgYXR0ZW1wdFxuICAgICAgICAgICAgICAgIGxvZygnY2Fubm90IGdldCBpZnJhbWUuY29udGVudERvY3VtZW50OiAnICsgZXJyKTtcbiAgICAgICAgICAgICAgICBkb2MgPSBmcmFtZS5kb2N1bWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkb2M7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSYWlscyBDU1JGIGhhY2sgKHRoYW5rcyB0byBZdmFuIEJhcnRoZWxlbXkpXG4gICAgICAgIHZhciBjc3JmX3Rva2VuID0gJCgnbWV0YVtuYW1lPWNzcmYtdG9rZW5dJykuYXR0cignY29udGVudCcpO1xuICAgICAgICB2YXIgY3NyZl9wYXJhbSA9ICQoJ21ldGFbbmFtZT1jc3JmLXBhcmFtXScpLmF0dHIoJ2NvbnRlbnQnKTtcbiAgICAgICAgaWYgKGNzcmZfcGFyYW0gJiYgY3NyZl90b2tlbikge1xuICAgICAgICAgICAgcy5leHRyYURhdGEgPSBzLmV4dHJhRGF0YSB8fCB7fTtcbiAgICAgICAgICAgIHMuZXh0cmFEYXRhW2NzcmZfcGFyYW1dID0gY3NyZl90b2tlbjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHRha2UgYSBicmVhdGggc28gdGhhdCBwZW5kaW5nIHJlcGFpbnRzIGdldCBzb21lIGNwdSB0aW1lIGJlZm9yZSB0aGUgdXBsb2FkIHN0YXJ0c1xuICAgICAgICBmdW5jdGlvbiBkb1N1Ym1pdCgpIHtcbiAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSBmb3JtIGF0dHJzIGFyZSBzZXRcbiAgICAgICAgICAgIHZhciB0ID0gJGZvcm0uYXR0cjIoJ3RhcmdldCcpLCBhID0gJGZvcm0uYXR0cjIoJ2FjdGlvbicpO1xuXG4gICAgICAgICAgICAvLyB1cGRhdGUgZm9ybSBhdHRycyBpbiBJRSBmcmllbmRseSB3YXlcbiAgICAgICAgICAgIGZvcm0uc2V0QXR0cmlidXRlKCd0YXJnZXQnLGlkKTtcbiAgICAgICAgICAgIGlmICghbWV0aG9kIHx8IC9wb3N0L2kudGVzdChtZXRob2QpICkge1xuICAgICAgICAgICAgICAgIGZvcm0uc2V0QXR0cmlidXRlKCdtZXRob2QnLCAnUE9TVCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGEgIT0gcy51cmwpIHtcbiAgICAgICAgICAgICAgICBmb3JtLnNldEF0dHJpYnV0ZSgnYWN0aW9uJywgcy51cmwpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBpZSBib3JrcyBpbiBzb21lIGNhc2VzIHdoZW4gc2V0dGluZyBlbmNvZGluZ1xuICAgICAgICAgICAgaWYgKCEgcy5za2lwRW5jb2RpbmdPdmVycmlkZSAmJiAoIW1ldGhvZCB8fCAvcG9zdC9pLnRlc3QobWV0aG9kKSkpIHtcbiAgICAgICAgICAgICAgICAkZm9ybS5hdHRyKHtcbiAgICAgICAgICAgICAgICAgICAgZW5jb2Rpbmc6ICdtdWx0aXBhcnQvZm9ybS1kYXRhJyxcbiAgICAgICAgICAgICAgICAgICAgZW5jdHlwZTogICdtdWx0aXBhcnQvZm9ybS1kYXRhJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBzdXBwb3J0IHRpbW91dFxuICAgICAgICAgICAgaWYgKHMudGltZW91dCkge1xuICAgICAgICAgICAgICAgIHRpbWVvdXRIYW5kbGUgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyB0aW1lZE91dCA9IHRydWU7IGNiKENMSUVOVF9USU1FT1VUX0FCT1JUKTsgfSwgcy50aW1lb3V0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gbG9vayBmb3Igc2VydmVyIGFib3J0c1xuICAgICAgICAgICAgZnVuY3Rpb24gY2hlY2tTdGF0ZSgpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3RhdGUgPSBnZXREb2MoaW8pLnJlYWR5U3RhdGU7XG4gICAgICAgICAgICAgICAgICAgIGxvZygnc3RhdGUgPSAnICsgc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUgJiYgc3RhdGUudG9Mb3dlckNhc2UoKSA9PSAndW5pbml0aWFsaXplZCcpXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGNoZWNrU3RhdGUsNTApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZygnU2VydmVyIGFib3J0OiAnICwgZSwgJyAoJywgZS5uYW1lLCAnKScpO1xuICAgICAgICAgICAgICAgICAgICBjYihTRVJWRVJfQUJPUlQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGltZW91dEhhbmRsZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SGFuZGxlKTtcbiAgICAgICAgICAgICAgICAgICAgdGltZW91dEhhbmRsZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGFkZCBcImV4dHJhXCIgZGF0YSB0byBmb3JtIGlmIHByb3ZpZGVkIGluIG9wdGlvbnNcbiAgICAgICAgICAgIHZhciBleHRyYUlucHV0cyA9IFtdO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAocy5leHRyYURhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiBpbiBzLmV4dHJhRGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMuZXh0cmFEYXRhLmhhc093blByb3BlcnR5KG4pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB1c2luZyB0aGUgJC5wYXJhbSBmb3JtYXQgdGhhdCBhbGxvd3MgZm9yIG11bHRpcGxlIHZhbHVlcyB3aXRoIHRoZSBzYW1lIG5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCQuaXNQbGFpbk9iamVjdChzLmV4dHJhRGF0YVtuXSkgJiYgcy5leHRyYURhdGFbbl0uaGFzT3duUHJvcGVydHkoJ25hbWUnKSAmJiBzLmV4dHJhRGF0YVtuXS5oYXNPd25Qcm9wZXJ0eSgndmFsdWUnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhSW5wdXRzLnB1c2goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwiJytzLmV4dHJhRGF0YVtuXS5uYW1lKydcIj4nKS52YWwocy5leHRyYURhdGFbbl0udmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmRUbyhmb3JtKVswXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhSW5wdXRzLnB1c2goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwiJytuKydcIj4nKS52YWwocy5leHRyYURhdGFbbl0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmRUbyhmb3JtKVswXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoIXMuaWZyYW1lVGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGFkZCBpZnJhbWUgdG8gZG9jIGFuZCBzdWJtaXQgdGhlIGZvcm1cbiAgICAgICAgICAgICAgICAgICAgJGlvLmFwcGVuZFRvKCdib2R5Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpby5hdHRhY2hFdmVudClcbiAgICAgICAgICAgICAgICAgICAgaW8uYXR0YWNoRXZlbnQoJ29ubG9hZCcsIGNiKTtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIGlvLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBjYiwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoY2hlY2tTdGF0ZSwxNSk7XG5cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBmb3JtLnN1Ym1pdCgpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2goZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGp1c3QgaW4gY2FzZSBmb3JtIGhhcyBlbGVtZW50IHdpdGggbmFtZS9pZCBvZiAnc3VibWl0J1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3VibWl0Rm4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmb3JtJykuc3VibWl0O1xuICAgICAgICAgICAgICAgICAgICBzdWJtaXRGbi5hcHBseShmb3JtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAvLyByZXNldCBhdHRycyBhbmQgcmVtb3ZlIFwiZXh0cmFcIiBpbnB1dCBlbGVtZW50c1xuICAgICAgICAgICAgICAgIGZvcm0uc2V0QXR0cmlidXRlKCdhY3Rpb24nLGEpO1xuICAgICAgICAgICAgICAgIGlmKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybS5zZXRBdHRyaWJ1dGUoJ3RhcmdldCcsIHQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICRmb3JtLnJlbW92ZUF0dHIoJ3RhcmdldCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkKGV4dHJhSW5wdXRzKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzLmZvcmNlU3luYykge1xuICAgICAgICAgICAgZG9TdWJtaXQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZG9TdWJtaXQsIDEwKTsgLy8gdGhpcyBsZXRzIGRvbSB1cGRhdGVzIHJlbmRlclxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRhdGEsIGRvYywgZG9tQ2hlY2tDb3VudCA9IDUwLCBjYWxsYmFja1Byb2Nlc3NlZDtcblxuICAgICAgICBmdW5jdGlvbiBjYihlKSB7XG4gICAgICAgICAgICBpZiAoeGhyLmFib3J0ZWQgfHwgY2FsbGJhY2tQcm9jZXNzZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRvYyA9IGdldERvYyhpbyk7XG4gICAgICAgICAgICBpZighZG9jKSB7XG4gICAgICAgICAgICAgICAgbG9nKCdjYW5ub3QgYWNjZXNzIHJlc3BvbnNlIGRvY3VtZW50Jyk7XG4gICAgICAgICAgICAgICAgZSA9IFNFUlZFUl9BQk9SVDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlID09PSBDTElFTlRfVElNRU9VVF9BQk9SVCAmJiB4aHIpIHtcbiAgICAgICAgICAgICAgICB4aHIuYWJvcnQoJ3RpbWVvdXQnKTtcbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoeGhyLCAndGltZW91dCcpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGUgPT0gU0VSVkVSX0FCT1JUICYmIHhocikge1xuICAgICAgICAgICAgICAgIHhoci5hYm9ydCgnc2VydmVyIGFib3J0Jyk7XG4gICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KHhociwgJ2Vycm9yJywgJ3NlcnZlciBhYm9ydCcpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFkb2MgfHwgZG9jLmxvY2F0aW9uLmhyZWYgPT0gcy5pZnJhbWVTcmMpIHtcbiAgICAgICAgICAgICAgICAvLyByZXNwb25zZSBub3QgcmVjZWl2ZWQgeWV0XG4gICAgICAgICAgICAgICAgaWYgKCF0aW1lZE91dClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlvLmRldGFjaEV2ZW50KVxuICAgICAgICAgICAgICAgIGlvLmRldGFjaEV2ZW50KCdvbmxvYWQnLCBjYik7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgaW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignbG9hZCcsIGNiLCBmYWxzZSk7XG5cbiAgICAgICAgICAgIHZhciBzdGF0dXMgPSAnc3VjY2VzcycsIGVyck1zZztcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKHRpbWVkT3V0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93ICd0aW1lb3V0JztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgaXNYbWwgPSBzLmRhdGFUeXBlID09ICd4bWwnIHx8IGRvYy5YTUxEb2N1bWVudCB8fCAkLmlzWE1MRG9jKGRvYyk7XG4gICAgICAgICAgICAgICAgbG9nKCdpc1htbD0nK2lzWG1sKTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzWG1sICYmIHdpbmRvdy5vcGVyYSAmJiAoZG9jLmJvZHkgPT09IG51bGwgfHwgIWRvYy5ib2R5LmlubmVySFRNTCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKC0tZG9tQ2hlY2tDb3VudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW4gc29tZSBicm93c2VycyAoT3BlcmEpIHRoZSBpZnJhbWUgRE9NIGlzIG5vdCBhbHdheXMgdHJhdmVyc2FibGUgd2hlblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIG9ubG9hZCBjYWxsYmFjayBmaXJlcywgc28gd2UgbG9vcCBhIGJpdCB0byBhY2NvbW1vZGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nKCdyZXF1ZWluZyBvbkxvYWQgY2FsbGJhY2ssIERPTSBub3QgYXZhaWxhYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGNiLCAyNTApO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIGxldCB0aGlzIGZhbGwgdGhyb3VnaCBiZWNhdXNlIHNlcnZlciByZXNwb25zZSBjb3VsZCBiZSBhbiBlbXB0eSBkb2N1bWVudFxuICAgICAgICAgICAgICAgICAgICAvL2xvZygnQ291bGQgbm90IGFjY2VzcyBpZnJhbWUgRE9NIGFmdGVyIG11dGlwbGUgdHJpZXMuJyk7XG4gICAgICAgICAgICAgICAgICAgIC8vdGhyb3cgJ0RPTUV4Y2VwdGlvbjogbm90IGF2YWlsYWJsZSc7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy9sb2coJ3Jlc3BvbnNlIGRldGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgdmFyIGRvY1Jvb3QgPSBkb2MuYm9keSA/IGRvYy5ib2R5IDogZG9jLmRvY3VtZW50RWxlbWVudDtcbiAgICAgICAgICAgICAgICB4aHIucmVzcG9uc2VUZXh0ID0gZG9jUm9vdCA/IGRvY1Jvb3QuaW5uZXJIVE1MIDogbnVsbDtcbiAgICAgICAgICAgICAgICB4aHIucmVzcG9uc2VYTUwgPSBkb2MuWE1MRG9jdW1lbnQgPyBkb2MuWE1MRG9jdW1lbnQgOiBkb2M7XG4gICAgICAgICAgICAgICAgaWYgKGlzWG1sKVxuICAgICAgICAgICAgICAgICAgICBzLmRhdGFUeXBlID0gJ3htbCc7XG4gICAgICAgICAgICAgICAgeGhyLmdldFJlc3BvbnNlSGVhZGVyID0gZnVuY3Rpb24oaGVhZGVyKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhlYWRlcnMgPSB7J2NvbnRlbnQtdHlwZSc6IHMuZGF0YVR5cGV9O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaGVhZGVyc1toZWFkZXIudG9Mb3dlckNhc2UoKV07XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAvLyBzdXBwb3J0IGZvciBYSFIgJ3N0YXR1cycgJiAnc3RhdHVzVGV4dCcgZW11bGF0aW9uIDpcbiAgICAgICAgICAgICAgICBpZiAoZG9jUm9vdCkge1xuICAgICAgICAgICAgICAgICAgICB4aHIuc3RhdHVzID0gTnVtYmVyKCBkb2NSb290LmdldEF0dHJpYnV0ZSgnc3RhdHVzJykgKSB8fCB4aHIuc3RhdHVzO1xuICAgICAgICAgICAgICAgICAgICB4aHIuc3RhdHVzVGV4dCA9IGRvY1Jvb3QuZ2V0QXR0cmlidXRlKCdzdGF0dXNUZXh0JykgfHwgeGhyLnN0YXR1c1RleHQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGR0ID0gKHMuZGF0YVR5cGUgfHwgJycpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgdmFyIHNjciA9IC8oanNvbnxzY3JpcHR8dGV4dCkvLnRlc3QoZHQpO1xuICAgICAgICAgICAgICAgIGlmIChzY3IgfHwgcy50ZXh0YXJlYSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBzZWUgaWYgdXNlciBlbWJlZGRlZCByZXNwb25zZSBpbiB0ZXh0YXJlYVxuICAgICAgICAgICAgICAgICAgICB2YXIgdGEgPSBkb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3RleHRhcmVhJylbMF07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgeGhyLnJlc3BvbnNlVGV4dCA9IHRhLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3VwcG9ydCBmb3IgWEhSICdzdGF0dXMnICYgJ3N0YXR1c1RleHQnIGVtdWxhdGlvbiA6XG4gICAgICAgICAgICAgICAgICAgICAgICB4aHIuc3RhdHVzID0gTnVtYmVyKCB0YS5nZXRBdHRyaWJ1dGUoJ3N0YXR1cycpICkgfHwgeGhyLnN0YXR1cztcbiAgICAgICAgICAgICAgICAgICAgICAgIHhoci5zdGF0dXNUZXh0ID0gdGEuZ2V0QXR0cmlidXRlKCdzdGF0dXNUZXh0JykgfHwgeGhyLnN0YXR1c1RleHQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc2NyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhY2NvdW50IGZvciBicm93c2VycyBpbmplY3RpbmcgcHJlIGFyb3VuZCBqc29uIHJlc3BvbnNlXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJlID0gZG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdwcmUnKVswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiID0gZG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5JylbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeGhyLnJlc3BvbnNlVGV4dCA9IHByZS50ZXh0Q29udGVudCA/IHByZS50ZXh0Q29udGVudCA6IHByZS5pbm5lclRleHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeGhyLnJlc3BvbnNlVGV4dCA9IGIudGV4dENvbnRlbnQgPyBiLnRleHRDb250ZW50IDogYi5pbm5lclRleHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZHQgPT0gJ3htbCcgJiYgIXhoci5yZXNwb25zZVhNTCAmJiB4aHIucmVzcG9uc2VUZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIHhoci5yZXNwb25zZVhNTCA9IHRvWG1sKHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSBodHRwRGF0YSh4aHIsIGR0LCBzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPSAncGFyc2VyZXJyb3InO1xuICAgICAgICAgICAgICAgICAgICB4aHIuZXJyb3IgPSBlcnJNc2cgPSAoZXJyIHx8IHN0YXR1cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGxvZygnZXJyb3IgY2F1Z2h0OiAnLGVycik7XG4gICAgICAgICAgICAgICAgc3RhdHVzID0gJ2Vycm9yJztcbiAgICAgICAgICAgICAgICB4aHIuZXJyb3IgPSBlcnJNc2cgPSAoZXJyIHx8IHN0YXR1cyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh4aHIuYWJvcnRlZCkge1xuICAgICAgICAgICAgICAgIGxvZygndXBsb2FkIGFib3J0ZWQnKTtcbiAgICAgICAgICAgICAgICBzdGF0dXMgPSBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoeGhyLnN0YXR1cykgeyAvLyB3ZSd2ZSBzZXQgeGhyLnN0YXR1c1xuICAgICAgICAgICAgICAgIHN0YXR1cyA9ICh4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDwgMzAwIHx8IHhoci5zdGF0dXMgPT09IDMwNCkgPyAnc3VjY2VzcycgOiAnZXJyb3InO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBvcmRlcmluZyBvZiB0aGVzZSBjYWxsYmFja3MvdHJpZ2dlcnMgaXMgb2RkLCBidXQgdGhhdCdzIGhvdyAkLmFqYXggZG9lcyBpdFxuICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gJ3N1Y2Nlc3MnKSB7XG4gICAgICAgICAgICAgICAgaWYgKHMuc3VjY2VzcylcbiAgICAgICAgICAgICAgICAgICAgcy5zdWNjZXNzLmNhbGwocy5jb250ZXh0LCBkYXRhLCAnc3VjY2VzcycsIHhocik7XG4gICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSh4aHIucmVzcG9uc2VUZXh0LCAnc3VjY2VzcycsIHhocik7XG4gICAgICAgICAgICAgICAgaWYgKGcpXG4gICAgICAgICAgICAgICAgICAgICQuZXZlbnQudHJpZ2dlcihcImFqYXhTdWNjZXNzXCIsIFt4aHIsIHNdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHN0YXR1cykge1xuICAgICAgICAgICAgICAgIGlmIChlcnJNc2cgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgZXJyTXNnID0geGhyLnN0YXR1c1RleHQ7XG4gICAgICAgICAgICAgICAgaWYgKHMuZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgIHMuZXJyb3IuY2FsbChzLmNvbnRleHQsIHhociwgc3RhdHVzLCBlcnJNc2cpO1xuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdCh4aHIsICdlcnJvcicsIGVyck1zZyk7XG4gICAgICAgICAgICAgICAgaWYgKGcpXG4gICAgICAgICAgICAgICAgICAgICQuZXZlbnQudHJpZ2dlcihcImFqYXhFcnJvclwiLCBbeGhyLCBzLCBlcnJNc2ddKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGcpXG4gICAgICAgICAgICAgICAgJC5ldmVudC50cmlnZ2VyKFwiYWpheENvbXBsZXRlXCIsIFt4aHIsIHNdKTtcblxuICAgICAgICAgICAgaWYgKGcgJiYgISAtLSQuYWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgJC5ldmVudC50cmlnZ2VyKFwiYWpheFN0b3BcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzLmNvbXBsZXRlKVxuICAgICAgICAgICAgICAgIHMuY29tcGxldGUuY2FsbChzLmNvbnRleHQsIHhociwgc3RhdHVzKTtcblxuICAgICAgICAgICAgY2FsbGJhY2tQcm9jZXNzZWQgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHMudGltZW91dClcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dEhhbmRsZSk7XG5cbiAgICAgICAgICAgIC8vIGNsZWFuIHVwXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmICghcy5pZnJhbWVUYXJnZXQpXG4gICAgICAgICAgICAgICAgICAgICRpby5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICBlbHNlICAvL2FkZGluZyBlbHNlIHRvIGNsZWFuIHVwIGV4aXN0aW5nIGlmcmFtZSByZXNwb25zZS5cbiAgICAgICAgICAgICAgICAgICAgJGlvLmF0dHIoJ3NyYycsIHMuaWZyYW1lU3JjKTtcbiAgICAgICAgICAgICAgICB4aHIucmVzcG9uc2VYTUwgPSBudWxsO1xuICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB0b1htbCA9ICQucGFyc2VYTUwgfHwgZnVuY3Rpb24ocywgZG9jKSB7IC8vIHVzZSBwYXJzZVhNTCBpZiBhdmFpbGFibGUgKGpRdWVyeSAxLjUrKVxuICAgICAgICAgICAgaWYgKHdpbmRvdy5BY3RpdmVYT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgZG9jID0gbmV3IEFjdGl2ZVhPYmplY3QoJ01pY3Jvc29mdC5YTUxET00nKTtcbiAgICAgICAgICAgICAgICBkb2MuYXN5bmMgPSAnZmFsc2UnO1xuICAgICAgICAgICAgICAgIGRvYy5sb2FkWE1MKHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZG9jID0gKG5ldyBET01QYXJzZXIoKSkucGFyc2VGcm9tU3RyaW5nKHMsICd0ZXh0L3htbCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIChkb2MgJiYgZG9jLmRvY3VtZW50RWxlbWVudCAmJiBkb2MuZG9jdW1lbnRFbGVtZW50Lm5vZGVOYW1lICE9ICdwYXJzZXJlcnJvcicpID8gZG9jIDogbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHBhcnNlSlNPTiA9ICQucGFyc2VKU09OIHx8IGZ1bmN0aW9uKHMpIHtcbiAgICAgICAgICAgIC8qanNsaW50IGV2aWw6dHJ1ZSAqL1xuICAgICAgICAgICAgcmV0dXJuIHdpbmRvd1snZXZhbCddKCcoJyArIHMgKyAnKScpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBodHRwRGF0YSA9IGZ1bmN0aW9uKCB4aHIsIHR5cGUsIHMgKSB7IC8vIG1vc3RseSBsaWZ0ZWQgZnJvbSBqcTEuNC40XG5cbiAgICAgICAgICAgIHZhciBjdCA9IHhoci5nZXRSZXNwb25zZUhlYWRlcignY29udGVudC10eXBlJykgfHwgJycsXG4gICAgICAgICAgICAgICAgeG1sID0gdHlwZSA9PT0gJ3htbCcgfHwgIXR5cGUgJiYgY3QuaW5kZXhPZigneG1sJykgPj0gMCxcbiAgICAgICAgICAgICAgICBkYXRhID0geG1sID8geGhyLnJlc3BvbnNlWE1MIDogeGhyLnJlc3BvbnNlVGV4dDtcblxuICAgICAgICAgICAgaWYgKHhtbCAmJiBkYXRhLmRvY3VtZW50RWxlbWVudC5ub2RlTmFtZSA9PT0gJ3BhcnNlcmVycm9yJykge1xuICAgICAgICAgICAgICAgIGlmICgkLmVycm9yKVxuICAgICAgICAgICAgICAgICAgICAkLmVycm9yKCdwYXJzZXJlcnJvcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHMgJiYgcy5kYXRhRmlsdGVyKSB7XG4gICAgICAgICAgICAgICAgZGF0YSA9IHMuZGF0YUZpbHRlcihkYXRhLCB0eXBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gJ2pzb24nIHx8ICF0eXBlICYmIGN0LmluZGV4T2YoJ2pzb24nKSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSBwYXJzZUpTT04oZGF0YSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSBcInNjcmlwdFwiIHx8ICF0eXBlICYmIGN0LmluZGV4T2YoXCJqYXZhc2NyaXB0XCIpID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgJC5nbG9iYWxFdmFsKGRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBkZWZlcnJlZDtcbiAgICB9XG59O1xuXG4vKipcbiAqIGFqYXhGb3JtKCkgcHJvdmlkZXMgYSBtZWNoYW5pc20gZm9yIGZ1bGx5IGF1dG9tYXRpbmcgZm9ybSBzdWJtaXNzaW9uLlxuICpcbiAqIFRoZSBhZHZhbnRhZ2VzIG9mIHVzaW5nIHRoaXMgbWV0aG9kIGluc3RlYWQgb2YgYWpheFN1Ym1pdCgpIGFyZTpcbiAqXG4gKiAxOiBUaGlzIG1ldGhvZCB3aWxsIGluY2x1ZGUgY29vcmRpbmF0ZXMgZm9yIDxpbnB1dCB0eXBlPVwiaW1hZ2VcIiAvPiBlbGVtZW50cyAoaWYgdGhlIGVsZW1lbnRcbiAqICAgIGlzIHVzZWQgdG8gc3VibWl0IHRoZSBmb3JtKS5cbiAqIDIuIFRoaXMgbWV0aG9kIHdpbGwgaW5jbHVkZSB0aGUgc3VibWl0IGVsZW1lbnQncyBuYW1lL3ZhbHVlIGRhdGEgKGZvciB0aGUgZWxlbWVudCB0aGF0IHdhc1xuICogICAgdXNlZCB0byBzdWJtaXQgdGhlIGZvcm0pLlxuICogMy4gVGhpcyBtZXRob2QgYmluZHMgdGhlIHN1Ym1pdCgpIG1ldGhvZCB0byB0aGUgZm9ybSBmb3IgeW91LlxuICpcbiAqIFRoZSBvcHRpb25zIGFyZ3VtZW50IGZvciBhamF4Rm9ybSB3b3JrcyBleGFjdGx5IGFzIGl0IGRvZXMgZm9yIGFqYXhTdWJtaXQuICBhamF4Rm9ybSBtZXJlbHlcbiAqIHBhc3NlcyB0aGUgb3B0aW9ucyBhcmd1bWVudCBhbG9uZyBhZnRlciBwcm9wZXJseSBiaW5kaW5nIGV2ZW50cyBmb3Igc3VibWl0IGVsZW1lbnRzIGFuZFxuICogdGhlIGZvcm0gaXRzZWxmLlxuICovXG4kLmZuLmFqYXhGb3JtID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIG9wdGlvbnMuZGVsZWdhdGlvbiA9IG9wdGlvbnMuZGVsZWdhdGlvbiAmJiAkLmlzRnVuY3Rpb24oJC5mbi5vbik7XG5cbiAgICAvLyBpbiBqUXVlcnkgMS4zKyB3ZSBjYW4gZml4IG1pc3Rha2VzIHdpdGggdGhlIHJlYWR5IHN0YXRlXG4gICAgaWYgKCFvcHRpb25zLmRlbGVnYXRpb24gJiYgdGhpcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdmFyIG8gPSB7IHM6IHRoaXMuc2VsZWN0b3IsIGM6IHRoaXMuY29udGV4dCB9O1xuICAgICAgICBpZiAoISQuaXNSZWFkeSAmJiBvLnMpIHtcbiAgICAgICAgICAgIGxvZygnRE9NIG5vdCByZWFkeSwgcXVldWluZyBhamF4Rm9ybScpO1xuICAgICAgICAgICAgJChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkKG8ucyxvLmMpLmFqYXhGb3JtKG9wdGlvbnMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICAvLyBpcyB5b3VyIERPTSByZWFkeT8gIGh0dHA6Ly9kb2NzLmpxdWVyeS5jb20vVHV0b3JpYWxzOkludHJvZHVjaW5nXyQoZG9jdW1lbnQpLnJlYWR5KClcbiAgICAgICAgbG9nKCd0ZXJtaW5hdGluZzsgemVybyBlbGVtZW50cyBmb3VuZCBieSBzZWxlY3RvcicgKyAoJC5pc1JlYWR5ID8gJycgOiAnIChET00gbm90IHJlYWR5KScpKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgaWYgKCBvcHRpb25zLmRlbGVnYXRpb24gKSB7XG4gICAgICAgICQoZG9jdW1lbnQpXG4gICAgICAgICAgICAub2ZmKCdzdWJtaXQuZm9ybS1wbHVnaW4nLCB0aGlzLnNlbGVjdG9yLCBkb0FqYXhTdWJtaXQpXG4gICAgICAgICAgICAub2ZmKCdjbGljay5mb3JtLXBsdWdpbicsIHRoaXMuc2VsZWN0b3IsIGNhcHR1cmVTdWJtaXR0aW5nRWxlbWVudClcbiAgICAgICAgICAgIC5vbignc3VibWl0LmZvcm0tcGx1Z2luJywgdGhpcy5zZWxlY3Rvciwgb3B0aW9ucywgZG9BamF4U3VibWl0KVxuICAgICAgICAgICAgLm9uKCdjbGljay5mb3JtLXBsdWdpbicsIHRoaXMuc2VsZWN0b3IsIG9wdGlvbnMsIGNhcHR1cmVTdWJtaXR0aW5nRWxlbWVudCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmFqYXhGb3JtVW5iaW5kKClcbiAgICAgICAgLmJpbmQoJ3N1Ym1pdC5mb3JtLXBsdWdpbicsIG9wdGlvbnMsIGRvQWpheFN1Ym1pdClcbiAgICAgICAgLmJpbmQoJ2NsaWNrLmZvcm0tcGx1Z2luJywgb3B0aW9ucywgY2FwdHVyZVN1Ym1pdHRpbmdFbGVtZW50KTtcbn07XG5cbi8vIHByaXZhdGUgZXZlbnQgaGFuZGxlcnNcbmZ1bmN0aW9uIGRvQWpheFN1Ym1pdChlKSB7XG4gICAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgICB2YXIgb3B0aW9ucyA9IGUuZGF0YTtcbiAgICBpZiAoIWUuaXNEZWZhdWx0UHJldmVudGVkKCkpIHsgLy8gaWYgZXZlbnQgaGFzIGJlZW4gY2FuY2VsZWQsIGRvbid0IHByb2NlZWRcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAkKGUudGFyZ2V0KS5hamF4U3VibWl0KG9wdGlvbnMpOyAvLyAjMzY1XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjYXB0dXJlU3VibWl0dGluZ0VsZW1lbnQoZSkge1xuICAgIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgIHZhciAkZWwgPSAkKHRhcmdldCk7XG4gICAgaWYgKCEoJGVsLmlzKFwiW3R5cGU9c3VibWl0XSxbdHlwZT1pbWFnZV1cIikpKSB7XG4gICAgICAgIC8vIGlzIHRoaXMgYSBjaGlsZCBlbGVtZW50IG9mIHRoZSBzdWJtaXQgZWw/ICAoZXg6IGEgc3BhbiB3aXRoaW4gYSBidXR0b24pXG4gICAgICAgIHZhciB0ID0gJGVsLmNsb3Nlc3QoJ1t0eXBlPXN1Ym1pdF0nKTtcbiAgICAgICAgaWYgKHQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGFyZ2V0ID0gdFswXTtcbiAgICB9XG4gICAgdmFyIGZvcm0gPSB0aGlzO1xuICAgIGZvcm0uY2xrID0gdGFyZ2V0O1xuICAgIGlmICh0YXJnZXQudHlwZSA9PSAnaW1hZ2UnKSB7XG4gICAgICAgIGlmIChlLm9mZnNldFggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZm9ybS5jbGtfeCA9IGUub2Zmc2V0WDtcbiAgICAgICAgICAgIGZvcm0uY2xrX3kgPSBlLm9mZnNldFk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mICQuZm4ub2Zmc2V0ID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHZhciBvZmZzZXQgPSAkZWwub2Zmc2V0KCk7XG4gICAgICAgICAgICBmb3JtLmNsa194ID0gZS5wYWdlWCAtIG9mZnNldC5sZWZ0O1xuICAgICAgICAgICAgZm9ybS5jbGtfeSA9IGUucGFnZVkgLSBvZmZzZXQudG9wO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm9ybS5jbGtfeCA9IGUucGFnZVggLSB0YXJnZXQub2Zmc2V0TGVmdDtcbiAgICAgICAgICAgIGZvcm0uY2xrX3kgPSBlLnBhZ2VZIC0gdGFyZ2V0Lm9mZnNldFRvcDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBjbGVhciBmb3JtIHZhcnNcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBmb3JtLmNsayA9IGZvcm0uY2xrX3ggPSBmb3JtLmNsa195ID0gbnVsbDsgfSwgMTAwKTtcbn1cblxuXG4vLyBhamF4Rm9ybVVuYmluZCB1bmJpbmRzIHRoZSBldmVudCBoYW5kbGVycyB0aGF0IHdlcmUgYm91bmQgYnkgYWpheEZvcm1cbiQuZm4uYWpheEZvcm1VbmJpbmQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy51bmJpbmQoJ3N1Ym1pdC5mb3JtLXBsdWdpbiBjbGljay5mb3JtLXBsdWdpbicpO1xufTtcblxuLyoqXG4gKiBmb3JtVG9BcnJheSgpIGdhdGhlcnMgZm9ybSBlbGVtZW50IGRhdGEgaW50byBhbiBhcnJheSBvZiBvYmplY3RzIHRoYXQgY2FuXG4gKiBiZSBwYXNzZWQgdG8gYW55IG9mIHRoZSBmb2xsb3dpbmcgYWpheCBmdW5jdGlvbnM6ICQuZ2V0LCAkLnBvc3QsIG9yIGxvYWQuXG4gKiBFYWNoIG9iamVjdCBpbiB0aGUgYXJyYXkgaGFzIGJvdGggYSAnbmFtZScgYW5kICd2YWx1ZScgcHJvcGVydHkuICBBbiBleGFtcGxlIG9mXG4gKiBhbiBhcnJheSBmb3IgYSBzaW1wbGUgbG9naW4gZm9ybSBtaWdodCBiZTpcbiAqXG4gKiBbIHsgbmFtZTogJ3VzZXJuYW1lJywgdmFsdWU6ICdqcmVzaWcnIH0sIHsgbmFtZTogJ3Bhc3N3b3JkJywgdmFsdWU6ICdzZWNyZXQnIH0gXVxuICpcbiAqIEl0IGlzIHRoaXMgYXJyYXkgdGhhdCBpcyBwYXNzZWQgdG8gcHJlLXN1Ym1pdCBjYWxsYmFjayBmdW5jdGlvbnMgcHJvdmlkZWQgdG8gdGhlXG4gKiBhamF4U3VibWl0KCkgYW5kIGFqYXhGb3JtKCkgbWV0aG9kcy5cbiAqL1xuJC5mbi5mb3JtVG9BcnJheSA9IGZ1bmN0aW9uKHNlbWFudGljLCBlbGVtZW50cykge1xuICAgIHZhciBhID0gW107XG4gICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBhO1xuICAgIH1cblxuICAgIHZhciBmb3JtID0gdGhpc1swXTtcbiAgICB2YXIgZWxzID0gc2VtYW50aWMgPyBmb3JtLmdldEVsZW1lbnRzQnlUYWdOYW1lKCcqJykgOiBmb3JtLmVsZW1lbnRzO1xuICAgIGlmICghZWxzKSB7XG4gICAgICAgIHJldHVybiBhO1xuICAgIH1cblxuICAgIHZhciBpLGosbix2LGVsLG1heCxqbWF4O1xuICAgIGZvcihpPTAsIG1heD1lbHMubGVuZ3RoOyBpIDwgbWF4OyBpKyspIHtcbiAgICAgICAgZWwgPSBlbHNbaV07XG4gICAgICAgIG4gPSBlbC5uYW1lO1xuICAgICAgICBpZiAoIW4gfHwgZWwuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbWFudGljICYmIGZvcm0uY2xrICYmIGVsLnR5cGUgPT0gXCJpbWFnZVwiKSB7XG4gICAgICAgICAgICAvLyBoYW5kbGUgaW1hZ2UgaW5wdXRzIG9uIHRoZSBmbHkgd2hlbiBzZW1hbnRpYyA9PSB0cnVlXG4gICAgICAgICAgICBpZihmb3JtLmNsayA9PSBlbCkge1xuICAgICAgICAgICAgICAgIGEucHVzaCh7bmFtZTogbiwgdmFsdWU6ICQoZWwpLnZhbCgpLCB0eXBlOiBlbC50eXBlIH0pO1xuICAgICAgICAgICAgICAgIGEucHVzaCh7bmFtZTogbisnLngnLCB2YWx1ZTogZm9ybS5jbGtfeH0sIHtuYW1lOiBuKycueScsIHZhbHVlOiBmb3JtLmNsa195fSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHYgPSAkLmZpZWxkVmFsdWUoZWwsIHRydWUpO1xuICAgICAgICBpZiAodiAmJiB2LmNvbnN0cnVjdG9yID09IEFycmF5KSB7XG4gICAgICAgICAgICBpZiAoZWxlbWVudHMpXG4gICAgICAgICAgICAgICAgZWxlbWVudHMucHVzaChlbCk7XG4gICAgICAgICAgICBmb3Ioaj0wLCBqbWF4PXYubGVuZ3RoOyBqIDwgam1heDsgaisrKSB7XG4gICAgICAgICAgICAgICAgYS5wdXNoKHtuYW1lOiBuLCB2YWx1ZTogdltqXX0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGZlYXR1cmUuZmlsZWFwaSAmJiBlbC50eXBlID09ICdmaWxlJykge1xuICAgICAgICAgICAgaWYgKGVsZW1lbnRzKVxuICAgICAgICAgICAgICAgIGVsZW1lbnRzLnB1c2goZWwpO1xuICAgICAgICAgICAgdmFyIGZpbGVzID0gZWwuZmlsZXM7XG4gICAgICAgICAgICBpZiAoZmlsZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgZm9yIChqPTA7IGogPCBmaWxlcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICBhLnB1c2goe25hbWU6IG4sIHZhbHVlOiBmaWxlc1tqXSwgdHlwZTogZWwudHlwZX0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vICMxODBcbiAgICAgICAgICAgICAgICBhLnB1c2goeyBuYW1lOiBuLCB2YWx1ZTogJycsIHR5cGU6IGVsLnR5cGUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodiAhPT0gbnVsbCAmJiB0eXBlb2YgdiAhPSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgaWYgKGVsZW1lbnRzKVxuICAgICAgICAgICAgICAgIGVsZW1lbnRzLnB1c2goZWwpO1xuICAgICAgICAgICAgYS5wdXNoKHtuYW1lOiBuLCB2YWx1ZTogdiwgdHlwZTogZWwudHlwZSwgcmVxdWlyZWQ6IGVsLnJlcXVpcmVkfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIXNlbWFudGljICYmIGZvcm0uY2xrKSB7XG4gICAgICAgIC8vIGlucHV0IHR5cGU9PSdpbWFnZScgYXJlIG5vdCBmb3VuZCBpbiBlbGVtZW50cyBhcnJheSEgaGFuZGxlIGl0IGhlcmVcbiAgICAgICAgdmFyICRpbnB1dCA9ICQoZm9ybS5jbGspLCBpbnB1dCA9ICRpbnB1dFswXTtcbiAgICAgICAgbiA9IGlucHV0Lm5hbWU7XG4gICAgICAgIGlmIChuICYmICFpbnB1dC5kaXNhYmxlZCAmJiBpbnB1dC50eXBlID09ICdpbWFnZScpIHtcbiAgICAgICAgICAgIGEucHVzaCh7bmFtZTogbiwgdmFsdWU6ICRpbnB1dC52YWwoKX0pO1xuICAgICAgICAgICAgYS5wdXNoKHtuYW1lOiBuKycueCcsIHZhbHVlOiBmb3JtLmNsa194fSwge25hbWU6IG4rJy55JywgdmFsdWU6IGZvcm0uY2xrX3l9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYTtcbn07XG5cbi8qKlxuICogU2VyaWFsaXplcyBmb3JtIGRhdGEgaW50byBhICdzdWJtaXR0YWJsZScgc3RyaW5nLiBUaGlzIG1ldGhvZCB3aWxsIHJldHVybiBhIHN0cmluZ1xuICogaW4gdGhlIGZvcm1hdDogbmFtZTE9dmFsdWUxJmFtcDtuYW1lMj12YWx1ZTJcbiAqL1xuJC5mbi5mb3JtU2VyaWFsaXplID0gZnVuY3Rpb24oc2VtYW50aWMpIHtcbiAgICAvL2hhbmQgb2ZmIHRvIGpRdWVyeS5wYXJhbSBmb3IgcHJvcGVyIGVuY29kaW5nXG4gICAgcmV0dXJuICQucGFyYW0odGhpcy5mb3JtVG9BcnJheShzZW1hbnRpYykpO1xufTtcblxuLyoqXG4gKiBTZXJpYWxpemVzIGFsbCBmaWVsZCBlbGVtZW50cyBpbiB0aGUgalF1ZXJ5IG9iamVjdCBpbnRvIGEgcXVlcnkgc3RyaW5nLlxuICogVGhpcyBtZXRob2Qgd2lsbCByZXR1cm4gYSBzdHJpbmcgaW4gdGhlIGZvcm1hdDogbmFtZTE9dmFsdWUxJmFtcDtuYW1lMj12YWx1ZTJcbiAqL1xuJC5mbi5maWVsZFNlcmlhbGl6ZSA9IGZ1bmN0aW9uKHN1Y2Nlc3NmdWwpIHtcbiAgICB2YXIgYSA9IFtdO1xuICAgIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIG4gPSB0aGlzLm5hbWU7XG4gICAgICAgIGlmICghbikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciB2ID0gJC5maWVsZFZhbHVlKHRoaXMsIHN1Y2Nlc3NmdWwpO1xuICAgICAgICBpZiAodiAmJiB2LmNvbnN0cnVjdG9yID09IEFycmF5KSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpPTAsbWF4PXYubGVuZ3RoOyBpIDwgbWF4OyBpKyspIHtcbiAgICAgICAgICAgICAgICBhLnB1c2goe25hbWU6IG4sIHZhbHVlOiB2W2ldfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodiAhPT0gbnVsbCAmJiB0eXBlb2YgdiAhPSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgYS5wdXNoKHtuYW1lOiB0aGlzLm5hbWUsIHZhbHVlOiB2fSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICAvL2hhbmQgb2ZmIHRvIGpRdWVyeS5wYXJhbSBmb3IgcHJvcGVyIGVuY29kaW5nXG4gICAgcmV0dXJuICQucGFyYW0oYSk7XG59O1xuXG4vKipcbiAqIFJldHVybnMgdGhlIHZhbHVlKHMpIG9mIHRoZSBlbGVtZW50IGluIHRoZSBtYXRjaGVkIHNldC4gIEZvciBleGFtcGxlLCBjb25zaWRlciB0aGUgZm9sbG93aW5nIGZvcm06XG4gKlxuICogIDxmb3JtPjxmaWVsZHNldD5cbiAqICAgICAgPGlucHV0IG5hbWU9XCJBXCIgdHlwZT1cInRleHRcIiAvPlxuICogICAgICA8aW5wdXQgbmFtZT1cIkFcIiB0eXBlPVwidGV4dFwiIC8+XG4gKiAgICAgIDxpbnB1dCBuYW1lPVwiQlwiIHR5cGU9XCJjaGVja2JveFwiIHZhbHVlPVwiQjFcIiAvPlxuICogICAgICA8aW5wdXQgbmFtZT1cIkJcIiB0eXBlPVwiY2hlY2tib3hcIiB2YWx1ZT1cIkIyXCIvPlxuICogICAgICA8aW5wdXQgbmFtZT1cIkNcIiB0eXBlPVwicmFkaW9cIiB2YWx1ZT1cIkMxXCIgLz5cbiAqICAgICAgPGlucHV0IG5hbWU9XCJDXCIgdHlwZT1cInJhZGlvXCIgdmFsdWU9XCJDMlwiIC8+XG4gKiAgPC9maWVsZHNldD48L2Zvcm0+XG4gKlxuICogIHZhciB2ID0gJCgnaW5wdXRbdHlwZT10ZXh0XScpLmZpZWxkVmFsdWUoKTtcbiAqICAvLyBpZiBubyB2YWx1ZXMgYXJlIGVudGVyZWQgaW50byB0aGUgdGV4dCBpbnB1dHNcbiAqICB2ID09IFsnJywnJ11cbiAqICAvLyBpZiB2YWx1ZXMgZW50ZXJlZCBpbnRvIHRoZSB0ZXh0IGlucHV0cyBhcmUgJ2ZvbycgYW5kICdiYXInXG4gKiAgdiA9PSBbJ2ZvbycsJ2JhciddXG4gKlxuICogIHZhciB2ID0gJCgnaW5wdXRbdHlwZT1jaGVja2JveF0nKS5maWVsZFZhbHVlKCk7XG4gKiAgLy8gaWYgbmVpdGhlciBjaGVja2JveCBpcyBjaGVja2VkXG4gKiAgdiA9PT0gdW5kZWZpbmVkXG4gKiAgLy8gaWYgYm90aCBjaGVja2JveGVzIGFyZSBjaGVja2VkXG4gKiAgdiA9PSBbJ0IxJywgJ0IyJ11cbiAqXG4gKiAgdmFyIHYgPSAkKCdpbnB1dFt0eXBlPXJhZGlvXScpLmZpZWxkVmFsdWUoKTtcbiAqICAvLyBpZiBuZWl0aGVyIHJhZGlvIGlzIGNoZWNrZWRcbiAqICB2ID09PSB1bmRlZmluZWRcbiAqICAvLyBpZiBmaXJzdCByYWRpbyBpcyBjaGVja2VkXG4gKiAgdiA9PSBbJ0MxJ11cbiAqXG4gKiBUaGUgc3VjY2Vzc2Z1bCBhcmd1bWVudCBjb250cm9scyB3aGV0aGVyIG9yIG5vdCB0aGUgZmllbGQgZWxlbWVudCBtdXN0IGJlICdzdWNjZXNzZnVsJ1xuICogKHBlciBodHRwOi8vd3d3LnczLm9yZy9UUi9odG1sNC9pbnRlcmFjdC9mb3Jtcy5odG1sI3N1Y2Nlc3NmdWwtY29udHJvbHMpLlxuICogVGhlIGRlZmF1bHQgdmFsdWUgb2YgdGhlIHN1Y2Nlc3NmdWwgYXJndW1lbnQgaXMgdHJ1ZS4gIElmIHRoaXMgdmFsdWUgaXMgZmFsc2UgdGhlIHZhbHVlKHMpXG4gKiBmb3IgZWFjaCBlbGVtZW50IGlzIHJldHVybmVkLlxuICpcbiAqIE5vdGU6IFRoaXMgbWV0aG9kICphbHdheXMqIHJldHVybnMgYW4gYXJyYXkuICBJZiBubyB2YWxpZCB2YWx1ZSBjYW4gYmUgZGV0ZXJtaW5lZCB0aGVcbiAqICAgIGFycmF5IHdpbGwgYmUgZW1wdHksIG90aGVyd2lzZSBpdCB3aWxsIGNvbnRhaW4gb25lIG9yIG1vcmUgdmFsdWVzLlxuICovXG4kLmZuLmZpZWxkVmFsdWUgPSBmdW5jdGlvbihzdWNjZXNzZnVsKSB7XG4gICAgZm9yICh2YXIgdmFsPVtdLCBpPTAsIG1heD10aGlzLmxlbmd0aDsgaSA8IG1heDsgaSsrKSB7XG4gICAgICAgIHZhciBlbCA9IHRoaXNbaV07XG4gICAgICAgIHZhciB2ID0gJC5maWVsZFZhbHVlKGVsLCBzdWNjZXNzZnVsKTtcbiAgICAgICAgaWYgKHYgPT09IG51bGwgfHwgdHlwZW9mIHYgPT0gJ3VuZGVmaW5lZCcgfHwgKHYuY29uc3RydWN0b3IgPT0gQXJyYXkgJiYgIXYubGVuZ3RoKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHYuY29uc3RydWN0b3IgPT0gQXJyYXkpXG4gICAgICAgICAgICAkLm1lcmdlKHZhbCwgdik7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHZhbC5wdXNoKHYpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSB2YWx1ZSBvZiB0aGUgZmllbGQgZWxlbWVudC5cbiAqL1xuJC5maWVsZFZhbHVlID0gZnVuY3Rpb24oZWwsIHN1Y2Nlc3NmdWwpIHtcbiAgICB2YXIgbiA9IGVsLm5hbWUsIHQgPSBlbC50eXBlLCB0YWcgPSBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKHN1Y2Nlc3NmdWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzdWNjZXNzZnVsID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoc3VjY2Vzc2Z1bCAmJiAoIW4gfHwgZWwuZGlzYWJsZWQgfHwgdCA9PSAncmVzZXQnIHx8IHQgPT0gJ2J1dHRvbicgfHxcbiAgICAgICAgKHQgPT0gJ2NoZWNrYm94JyB8fCB0ID09ICdyYWRpbycpICYmICFlbC5jaGVja2VkIHx8XG4gICAgICAgICh0ID09ICdzdWJtaXQnIHx8IHQgPT0gJ2ltYWdlJykgJiYgZWwuZm9ybSAmJiBlbC5mb3JtLmNsayAhPSBlbCB8fFxuICAgICAgICB0YWcgPT0gJ3NlbGVjdCcgJiYgZWwuc2VsZWN0ZWRJbmRleCA9PSAtMSkpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGlmICh0YWcgPT0gJ3NlbGVjdCcpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gZWwuc2VsZWN0ZWRJbmRleDtcbiAgICAgICAgaWYgKGluZGV4IDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGEgPSBbXSwgb3BzID0gZWwub3B0aW9ucztcbiAgICAgICAgdmFyIG9uZSA9ICh0ID09ICdzZWxlY3Qtb25lJyk7XG4gICAgICAgIHZhciBtYXggPSAob25lID8gaW5kZXgrMSA6IG9wcy5sZW5ndGgpO1xuICAgICAgICBmb3IodmFyIGk9KG9uZSA/IGluZGV4IDogMCk7IGkgPCBtYXg7IGkrKykge1xuICAgICAgICAgICAgdmFyIG9wID0gb3BzW2ldO1xuICAgICAgICAgICAgaWYgKG9wLnNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIHYgPSBvcC52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAoIXYpIHsgLy8gZXh0cmEgcGFpbiBmb3IgSUUuLi5cbiAgICAgICAgICAgICAgICAgICAgdiA9IChvcC5hdHRyaWJ1dGVzICYmIG9wLmF0dHJpYnV0ZXNbJ3ZhbHVlJ10gJiYgIShvcC5hdHRyaWJ1dGVzWyd2YWx1ZSddLnNwZWNpZmllZCkpID8gb3AudGV4dCA6IG9wLnZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAob25lKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhLnB1c2godik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGE7XG4gICAgfVxuICAgIHJldHVybiAkKGVsKS52YWwoKTtcbn07XG5cbi8qKlxuICogQ2xlYXJzIHRoZSBmb3JtIGRhdGEuICBUYWtlcyB0aGUgZm9sbG93aW5nIGFjdGlvbnMgb24gdGhlIGZvcm0ncyBpbnB1dCBmaWVsZHM6XG4gKiAgLSBpbnB1dCB0ZXh0IGZpZWxkcyB3aWxsIGhhdmUgdGhlaXIgJ3ZhbHVlJyBwcm9wZXJ0eSBzZXQgdG8gdGhlIGVtcHR5IHN0cmluZ1xuICogIC0gc2VsZWN0IGVsZW1lbnRzIHdpbGwgaGF2ZSB0aGVpciAnc2VsZWN0ZWRJbmRleCcgcHJvcGVydHkgc2V0IHRvIC0xXG4gKiAgLSBjaGVja2JveCBhbmQgcmFkaW8gaW5wdXRzIHdpbGwgaGF2ZSB0aGVpciAnY2hlY2tlZCcgcHJvcGVydHkgc2V0IHRvIGZhbHNlXG4gKiAgLSBpbnB1dHMgb2YgdHlwZSBzdWJtaXQsIGJ1dHRvbiwgcmVzZXQsIGFuZCBoaWRkZW4gd2lsbCAqbm90KiBiZSBlZmZlY3RlZFxuICogIC0gYnV0dG9uIGVsZW1lbnRzIHdpbGwgKm5vdCogYmUgZWZmZWN0ZWRcbiAqL1xuJC5mbi5jbGVhckZvcm0gPSBmdW5jdGlvbihpbmNsdWRlSGlkZGVuKSB7XG4gICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgJCgnaW5wdXQsc2VsZWN0LHRleHRhcmVhJywgdGhpcykuY2xlYXJGaWVsZHMoaW5jbHVkZUhpZGRlbik7XG4gICAgfSk7XG59O1xuXG4vKipcbiAqIENsZWFycyB0aGUgc2VsZWN0ZWQgZm9ybSBlbGVtZW50cy5cbiAqL1xuJC5mbi5jbGVhckZpZWxkcyA9ICQuZm4uY2xlYXJJbnB1dHMgPSBmdW5jdGlvbihpbmNsdWRlSGlkZGVuKSB7XG4gICAgdmFyIHJlID0gL14oPzpjb2xvcnxkYXRlfGRhdGV0aW1lfGVtYWlsfG1vbnRofG51bWJlcnxwYXNzd29yZHxyYW5nZXxzZWFyY2h8dGVsfHRleHR8dGltZXx1cmx8d2VlaykkL2k7IC8vICdoaWRkZW4nIGlzIG5vdCBpbiB0aGlzIGxpc3RcbiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdCA9IHRoaXMudHlwZSwgdGFnID0gdGhpcy50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGlmIChyZS50ZXN0KHQpIHx8IHRhZyA9PSAndGV4dGFyZWEnKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gJyc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodCA9PSAnY2hlY2tib3gnIHx8IHQgPT0gJ3JhZGlvJykge1xuICAgICAgICAgICAgdGhpcy5jaGVja2VkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGFnID09ICdzZWxlY3QnKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkSW5kZXggPSAtMTtcbiAgICAgICAgfVxuXHRcdGVsc2UgaWYgKHQgPT0gXCJmaWxlXCIpIHtcblx0XHRcdGlmICgvTVNJRS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSkge1xuXHRcdFx0XHQkKHRoaXMpLnJlcGxhY2VXaXRoKCQodGhpcykuY2xvbmUodHJ1ZSkpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0JCh0aGlzKS52YWwoJycpO1xuXHRcdFx0fVxuXHRcdH1cbiAgICAgICAgZWxzZSBpZiAoaW5jbHVkZUhpZGRlbikge1xuICAgICAgICAgICAgLy8gaW5jbHVkZUhpZGRlbiBjYW4gYmUgdGhlIHZhbHVlIHRydWUsIG9yIGl0IGNhbiBiZSBhIHNlbGVjdG9yIHN0cmluZ1xuICAgICAgICAgICAgLy8gaW5kaWNhdGluZyBhIHNwZWNpYWwgdGVzdDsgZm9yIGV4YW1wbGU6XG4gICAgICAgICAgICAvLyAgJCgnI215Rm9ybScpLmNsZWFyRm9ybSgnLnNwZWNpYWw6aGlkZGVuJylcbiAgICAgICAgICAgIC8vIHRoZSBhYm92ZSB3b3VsZCBjbGVhbiBoaWRkZW4gaW5wdXRzIHRoYXQgaGF2ZSB0aGUgY2xhc3Mgb2YgJ3NwZWNpYWwnXG4gICAgICAgICAgICBpZiAoIChpbmNsdWRlSGlkZGVuID09PSB0cnVlICYmIC9oaWRkZW4vLnRlc3QodCkpIHx8XG4gICAgICAgICAgICAgICAgICh0eXBlb2YgaW5jbHVkZUhpZGRlbiA9PSAnc3RyaW5nJyAmJiAkKHRoaXMpLmlzKGluY2x1ZGVIaWRkZW4pKSApXG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9ICcnO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG4vKipcbiAqIFJlc2V0cyB0aGUgZm9ybSBkYXRhLiAgQ2F1c2VzIGFsbCBmb3JtIGVsZW1lbnRzIHRvIGJlIHJlc2V0IHRvIHRoZWlyIG9yaWdpbmFsIHZhbHVlLlxuICovXG4kLmZuLnJlc2V0Rm9ybSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIGd1YXJkIGFnYWluc3QgYW4gaW5wdXQgd2l0aCB0aGUgbmFtZSBvZiAncmVzZXQnXG4gICAgICAgIC8vIG5vdGUgdGhhdCBJRSByZXBvcnRzIHRoZSByZXNldCBmdW5jdGlvbiBhcyBhbiAnb2JqZWN0J1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMucmVzZXQgPT0gJ2Z1bmN0aW9uJyB8fCAodHlwZW9mIHRoaXMucmVzZXQgPT0gJ29iamVjdCcgJiYgIXRoaXMucmVzZXQubm9kZVR5cGUpKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbi8qKlxuICogRW5hYmxlcyBvciBkaXNhYmxlcyBhbnkgbWF0Y2hpbmcgZWxlbWVudHMuXG4gKi9cbiQuZm4uZW5hYmxlID0gZnVuY3Rpb24oYikge1xuICAgIGlmIChiID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYiA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSAhYjtcbiAgICB9KTtcbn07XG5cbi8qKlxuICogQ2hlY2tzL3VuY2hlY2tzIGFueSBtYXRjaGluZyBjaGVja2JveGVzIG9yIHJhZGlvIGJ1dHRvbnMgYW5kXG4gKiBzZWxlY3RzL2Rlc2VsZWN0cyBhbmQgbWF0Y2hpbmcgb3B0aW9uIGVsZW1lbnRzLlxuICovXG4kLmZuLnNlbGVjdGVkID0gZnVuY3Rpb24oc2VsZWN0KSB7XG4gICAgaWYgKHNlbGVjdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHNlbGVjdCA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB0ID0gdGhpcy50eXBlO1xuICAgICAgICBpZiAodCA9PSAnY2hlY2tib3gnIHx8IHQgPT0gJ3JhZGlvJykge1xuICAgICAgICAgICAgdGhpcy5jaGVja2VkID0gc2VsZWN0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09ICdvcHRpb24nKSB7XG4gICAgICAgICAgICB2YXIgJHNlbCA9ICQodGhpcykucGFyZW50KCdzZWxlY3QnKTtcbiAgICAgICAgICAgIGlmIChzZWxlY3QgJiYgJHNlbFswXSAmJiAkc2VsWzBdLnR5cGUgPT0gJ3NlbGVjdC1vbmUnKSB7XG4gICAgICAgICAgICAgICAgLy8gZGVzZWxlY3QgYWxsIG90aGVyIG9wdGlvbnNcbiAgICAgICAgICAgICAgICAkc2VsLmZpbmQoJ29wdGlvbicpLnNlbGVjdGVkKGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWQgPSBzZWxlY3Q7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbi8vIGV4cG9zZSBkZWJ1ZyB2YXJcbiQuZm4uYWpheFN1Ym1pdC5kZWJ1ZyA9IGZhbHNlO1xuXG4vLyBoZWxwZXIgZm4gZm9yIGNvbnNvbGUgbG9nZ2luZ1xuZnVuY3Rpb24gbG9nKCkge1xuICAgIGlmICghJC5mbi5hamF4U3VibWl0LmRlYnVnKVxuICAgICAgICByZXR1cm47XG4gICAgdmFyIG1zZyA9ICdbanF1ZXJ5LmZvcm1dICcgKyBBcnJheS5wcm90b3R5cGUuam9pbi5jYWxsKGFyZ3VtZW50cywnJyk7XG4gICAgaWYgKHdpbmRvdy5jb25zb2xlICYmIHdpbmRvdy5jb25zb2xlLmxvZykge1xuICAgICAgICB3aW5kb3cuY29uc29sZS5sb2cobXNnKTtcbiAgICB9XG4gICAgZWxzZSBpZiAod2luZG93Lm9wZXJhICYmIHdpbmRvdy5vcGVyYS5wb3N0RXJyb3IpIHtcbiAgICAgICAgd2luZG93Lm9wZXJhLnBvc3RFcnJvcihtc2cpO1xuICAgIH1cbn1cblxufSkpO1xuXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
